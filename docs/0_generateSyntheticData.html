<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<<<<<<< HEAD
<title>Psychological Wellbeing, Sleep, and Video Gaming: Analyses of Comprehensive Digital Traces - 2&nbsp; Generate Synthetic Data</title>
=======
<title>Relationships Between Health and Logged Video Game Play Across Platforms - 2&nbsp; Generate Synthetic Data</title>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./1_preprocess.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./0_generateSyntheticData.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Generate Synthetic Data</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
<<<<<<< HEAD
      <a href="./">Psychological Wellbeing, Sleep, and Video Gaming: Analyses of Comprehensive Digital Traces</a> 
=======
      <a href="./">Relationships Between Health and Logged Video Game Play Across Platforms</a> 
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
<<<<<<< HEAD
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Psychological Wellbeing, Sleep, and Video Gaming: Analyses of Comprehensive Digital Traces</span></span></a>
=======
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Relationships Between Health and Logged Video Game Play Across Platforms</span></span></a>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0_generateSyntheticData.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Generate Synthetic Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1_preprocess.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Preprocess Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2_basicNeeds.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Study 1: Gaming and Basic Needs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3_sleep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Study 2: Gaming and Sleep</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
<<<<<<< HEAD
  <li><a href="#preamble" id="toc-preamble" class="nav-link active" data-scroll-target="#preamble"><span class="header-section-number">2.1</span> Preamble</a></li>
  <li><a href="#simulate-participant-sample" id="toc-simulate-participant-sample" class="nav-link" data-scroll-target="#simulate-participant-sample"><span class="header-section-number">2.2</span> Simulate participant sample</a>
  <ul class="collapse">
  <li><a href="#intake" id="toc-intake" class="nav-link" data-scroll-target="#intake"><span class="header-section-number">2.2.1</span> Intake</a></li>
  <li><a href="#play-history" id="toc-play-history" class="nav-link" data-scroll-target="#play-history"><span class="header-section-number">2.2.2</span> Play History</a></li>
  <li><a href="#dropoutattrition" id="toc-dropoutattrition" class="nav-link" data-scroll-target="#dropoutattrition"><span class="header-section-number">2.2.3</span> Dropout/attrition</a></li>
  </ul></li>
  <li><a href="#simulate-telemetry" id="toc-simulate-telemetry" class="nav-link" data-scroll-target="#simulate-telemetry"><span class="header-section-number">2.3</span> Simulate Telemetry</a>
  <ul class="collapse">
  <li><a href="#genres" id="toc-genres" class="nav-link" data-scroll-target="#genres"><span class="header-section-number">2.3.1</span> Genres</a></li>
  <li><a href="#nintendo" id="toc-nintendo" class="nav-link" data-scroll-target="#nintendo"><span class="header-section-number">2.3.2</span> Nintendo</a></li>
  <li><a href="#xbox" id="toc-xbox" class="nav-link" data-scroll-target="#xbox"><span class="header-section-number">2.3.3</span> Xbox</a></li>
  <li><a href="#steam" id="toc-steam" class="nav-link" data-scroll-target="#steam"><span class="header-section-number">2.3.4</span> Steam</a></li>
  <li><a href="#ios" id="toc-ios" class="nav-link" data-scroll-target="#ios"><span class="header-section-number">2.3.5</span> iOS</a></li>
  <li><a href="#android" id="toc-android" class="nav-link" data-scroll-target="#android"><span class="header-section-number">2.3.6</span> Android</a></li>
  </ul></li>
  <li><a href="#simulate-self-report-data-diary-and-panel" id="toc-simulate-self-report-data-diary-and-panel" class="nav-link" data-scroll-target="#simulate-self-report-data-diary-and-panel"><span class="header-section-number">2.4</span> Simulate self-report data (diary and panel)</a>
  <ul class="collapse">
  <li><a href="#panel" id="toc-panel" class="nav-link" data-scroll-target="#panel"><span class="header-section-number">2.4.1</span> Panel</a></li>
  <li><a href="#diary" id="toc-diary" class="nav-link" data-scroll-target="#diary"><span class="header-section-number">2.4.2</span> Diary</a></li>
  </ul></li>
  <li><a href="#generate-codebook" id="toc-generate-codebook" class="nav-link" data-scroll-target="#generate-codebook"><span class="header-section-number">2.5</span> Generate Codebook</a></li>
  <li><a href="#save-data" id="toc-save-data" class="nav-link" data-scroll-target="#save-data"><span class="header-section-number">2.6</span> Save data</a></li>
=======
  <li><a href="#generate-synthetic-data" id="toc-generate-synthetic-data" class="nav-link active" data-scroll-target="#generate-synthetic-data"><span class="header-section-number">3</span> Generate Synthetic Data</a>
  <ul class="collapse">
  <li><a href="#preamble" id="toc-preamble" class="nav-link" data-scroll-target="#preamble"><span class="header-section-number">3.1</span> Preamble</a></li>
  <li><a href="#simulate-participant-sample" id="toc-simulate-participant-sample" class="nav-link" data-scroll-target="#simulate-participant-sample"><span class="header-section-number">3.2</span> Simulate participant sample</a>
  <ul class="collapse">
  <li><a href="#intake" id="toc-intake" class="nav-link" data-scroll-target="#intake"><span class="header-section-number">3.2.1</span> Intake</a></li>
  <li><a href="#play-history" id="toc-play-history" class="nav-link" data-scroll-target="#play-history"><span class="header-section-number">3.2.2</span> Play History</a></li>
  <li><a href="#dropoutattrition" id="toc-dropoutattrition" class="nav-link" data-scroll-target="#dropoutattrition"><span class="header-section-number">3.2.3</span> Dropout/attrition</a></li>
  </ul></li>
  <li><a href="#simulate-telemetry" id="toc-simulate-telemetry" class="nav-link" data-scroll-target="#simulate-telemetry"><span class="header-section-number">3.3</span> Simulate Telemetry</a>
  <ul class="collapse">
  <li><a href="#genres" id="toc-genres" class="nav-link" data-scroll-target="#genres"><span class="header-section-number">3.3.1</span> Genres</a></li>
  <li><a href="#nintendo" id="toc-nintendo" class="nav-link" data-scroll-target="#nintendo"><span class="header-section-number">3.3.2</span> Nintendo</a></li>
  <li><a href="#xbox" id="toc-xbox" class="nav-link" data-scroll-target="#xbox"><span class="header-section-number">3.3.3</span> Xbox</a></li>
  <li><a href="#steam" id="toc-steam" class="nav-link" data-scroll-target="#steam"><span class="header-section-number">3.3.4</span> Steam</a></li>
  <li><a href="#ios" id="toc-ios" class="nav-link" data-scroll-target="#ios"><span class="header-section-number">3.3.5</span> iOS</a></li>
  <li><a href="#android" id="toc-android" class="nav-link" data-scroll-target="#android"><span class="header-section-number">3.3.6</span> Android</a></li>
  </ul></li>
  <li><a href="#simulate-self-report-data-diary-and-panel" id="toc-simulate-self-report-data-diary-and-panel" class="nav-link" data-scroll-target="#simulate-self-report-data-diary-and-panel"><span class="header-section-number">3.4</span> Simulate self-report data (diary and panel)</a>
  <ul class="collapse">
  <li><a href="#panel" id="toc-panel" class="nav-link" data-scroll-target="#panel"><span class="header-section-number">3.4.1</span> Panel</a></li>
  <li><a href="#diary" id="toc-diary" class="nav-link" data-scroll-target="#diary"><span class="header-section-number">3.4.2</span> Diary</a></li>
  </ul></li>
  <li><a href="#generate-codebook" id="toc-generate-codebook" class="nav-link" data-scroll-target="#generate-codebook"><span class="header-section-number">3.5</span> Generate Codebook</a></li>
  <li><a href="#save-data" id="toc-save-data" class="nav-link" data-scroll-target="#save-data"><span class="header-section-number">3.6</span> Save data</a></li>
  </ul></li>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Generate Synthetic Data</span></h1>
</div>



<div class="quarto-title-meta column-body">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This file is intended for internal use—compilation requires access to the original data files and the Qualtrics API.</p>
<<<<<<< HEAD
<p>For external users, the most relevant will be the synthetic data files and codebook that this file generates. We’ve nonetheless included this simulation code in case readers want to understand how the synthetic data was created.</p>
<p>To render the remaining files without the generation of simulated data, run <code>quarto render --profile external</code> from the root directory.</p>
</div>
</div>
<section id="preamble" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="preamble"><span class="header-section-number">2.1</span> Preamble</h2>
<p>First, set options and load some libraries we’ll need.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code (options)</summary>
=======
<p>For external users, most relevant will be the synthetic data files and codebook that this file generates. We’ve nonetheless included this simulation code in case readers want to understand how the synthetic data was created.</p>
</div>
</div>
<section id="generate-synthetic-data" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Generate Synthetic Data</h1>
<section id="preamble" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="preamble"><span class="header-section-number">3.1</span> Preamble</h2>
<p>First, set options and load some libraries we’ll need.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">echo =</span> knitr<span class="sc">::</span><span class="fu">is_html_output</span>(),</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">warning =</span> <span class="cn">FALSE</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">message =</span> <span class="cn">FALSE</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="cn">TRUE</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">8675309</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<<<<<<< HEAD
<summary>Show code (load libraries)</summary>
=======
<summary>Show the code</summary>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"pacman"</span>)) <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pacman)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  tidyverse, jsonlite, qualtRics, sjlabelled, hms, openxlsx, scales</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<<<<<<< HEAD
<summary>Show code (custom functions)</summary>
=======
<summary>Show the code</summary>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to generate a random time in hh:mm format</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>randomTime <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  randomHours <span class="ot">&lt;-</span> <span class="fu">runif</span>(n, <span class="dv">0</span>, <span class="dv">24</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  randomMinutes <span class="ot">&lt;-</span> <span class="fu">runif</span>(n, <span class="dv">0</span>, <span class="dv">60</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  randomTimes <span class="ot">&lt;-</span> <span class="fu">now</span>() <span class="sc">+</span> <span class="fu">dhours</span>(randomHours) <span class="sc">+</span> <span class="fu">dminutes</span>(randomMinutes)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format</span>(randomTimes, <span class="st">"%H:%M"</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to randomly assign 1-3 genres to a game</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>assignGenres <span class="ot">&lt;-</span> <span class="cf">function</span>(genres) {</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  numGenres <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span>, <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">5</span>, .<span class="dv">3</span>, .<span class="dv">2</span>))</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  genres <span class="ot">&lt;-</span> <span class="fu">sample</span>(genres, numGenres, <span class="at">replace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(genres, <span class="at">collapse =</span> <span class="st">", "</span>)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co"># function to sample from a zero-inflated gamma distribution, used for iOS app categories</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>sampleTime <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(<span class="fu">runif</span>(n) <span class="sc">&lt;</span> <span class="fl">0.4</span>, <span class="dv">0</span>, <span class="fu">rgamma</span>(n, <span class="at">shape =</span> <span class="dv">3</span>, <span class="at">scale =</span> <span class="dv">2</span> <span class="sc">/</span> <span class="dv">2</span>))</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample a single row from df_source based on a matching ID</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>sampleRowByID <span class="ot">&lt;-</span> <span class="cf">function</span>(id, df, nRows) {</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(ID <span class="sc">==</span> <span class="sc">!!</span>id) <span class="sc">|&gt;</span> <span class="co"># Filter rows that match the given ID</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_sample</span>(<span class="at">n =</span> nRows, <span class="at">replace =</span> <span class="cn">FALSE</span>) <span class="co"># Randomly sample one row</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Then, import the true data we need, from which we’ll do some bootstrapping.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Some files are available publicly online; others are private and only on OneDrive (paths specified in <code>.Renviron</code>); and other are pulled using the Qualtrics API (internal use only).</p>
</div>
</div>
<div class="cell">
<details class="code-fold">
<<<<<<< HEAD
<summary>Show code (load data)</summary>
=======
<summary>Show the code</summary>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># some files are available online</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(<span class="st">"data/survey.csv.gz"</span>)) {</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(<span class="st">"data"</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  datSurvey <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://github.com/digital-wellbeing/noa-pilot-ms/raw/main/data/survey.csv.gz"</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(datSurvey, <span class="st">"data/survey.csv.gz"</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  datNintendo <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://github.com/digital-wellbeing/noa-pilot-ms/raw/main/data/telemetry.csv.gz"</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(datNintendo, <span class="st">"data/telemetry.csv.gz"</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  datDemo <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://github.com/digital-wellbeing/noa-pilot-ms/raw/main/data/demographics.csv.gz"</span>)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(datDemo, <span class="st">"data/demographics.csv.gz"</span>)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  datMeta <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://github.com/digital-wellbeing/noa-pilot-ms/raw/main/data/gameMetadata.csv.gz"</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(datMeta, <span class="st">"data/gameMetadata.csv.gz"</span>)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  datSurvey <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/survey.csv.gz"</span>)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  datNintendo <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/telemetry.csv.gz"</span>)</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  datDemo <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/demographics.csv.gz"</span>)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  datMeta <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/gameMetadata.csv.gz"</span>)</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="co"># other files are only available on onedrive privately (paths specified in .Renviron)</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>datXbox <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="fu">Sys.getenv</span>(<span class="st">"xboxDataPath"</span>))</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>datSteam <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">Sys.getenv</span>(<span class="st">"steamDataPath"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(played <span class="sc">==</span> <span class="st">"Yes"</span>)</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>datAndroid <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="fu">Sys.getenv</span>(<span class="st">"androidDataPath"</span>))</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="co"># and three are available through the Qualtrics API (internal use only)</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>datIntake <span class="ot">&lt;-</span> <span class="fu">fetch_survey</span>(<span class="fu">Sys.getenv</span>(<span class="st">"QUALTRICS_INTAKE_SURVEY_ID"</span>), <span class="at">include_display_order =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>(StartDate<span class="sc">:</span>consent), <span class="sc">-</span>(isWilling<span class="sc">:</span>RANDOM_ID), <span class="sc">-</span>gender_4_TEXT) <span class="sc">|&gt;</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">playProp_7 =</span> <span class="st">""</span>) <span class="co"># fix one broken column</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a><span class="co"># pull panel survey from qualtrics - make sure test responses for the latest</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a><span class="co"># published version of the survey have already been generated</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a><span class="co"># two steps because we need to mutate without losing labels </span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>datPanelRaw <span class="ot">&lt;-</span> <span class="fu">fetch_survey</span>(<span class="fu">Sys.getenv</span>(<span class="st">"QUALTRICS_PANEL_SURVEY_ID"</span>), <span class="at">include_display_order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>datPanel <span class="ot">&lt;-</span> datPanelRaw <span class="sc">|&gt;</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(StartDate<span class="sc">:</span>UserLanguage), <span class="sc">-</span>PID, <span class="sc">-</span>wave) <span class="sc">|&gt;</span> </span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># test responses for mctq don't work at all so we need to fill these in manually</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">mctq_2_1 =</span> <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">7</span>, <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">05</span>, .<span class="dv">05</span>, .<span class="dv">10</span>, .<span class="dv">10</span>, .<span class="dv">20</span>, .<span class="dv">25</span>, .<span class="dv">15</span>, .<span class="dv">10</span>)),</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(mctq_6_6, mctq_6_4, mctq_3_6, mctq_3_4), <span class="sc">~</span> <span class="fu">runif</span>(<span class="fu">n</span>(), <span class="at">min =</span> <span class="dv">1</span>, <span class="at">max =</span> <span class="dv">60</span>)),</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(mctq_3_1, mctq_3_3, mctq_3_5, mctq_6_1, mctq_6_3, mctq_6_5), <span class="sc">~</span> <span class="fu">randomTime</span>(<span class="fu">n</span>()))</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Reapply the original labels to ensure they are retained</span></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">copy_labels</span>(datPanelRaw)</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a><span class="co"># pull diary survey from qualtrics - make sure test responses for the latest</span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a><span class="co"># published version of the survey have already been generated</span></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>datDiary <span class="ot">&lt;-</span> <span class="fu">fetch_survey</span>(<span class="fu">Sys.getenv</span>(<span class="st">"QUALTRICS_DIARY_SURVEY_ID"</span>), <span class="at">include_display_order =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(StartDate<span class="sc">:</span>UserLanguage), <span class="sc">-</span>PID, <span class="sc">-</span>wave)</span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(<span class="st">"data-synthetic"</span>)) {</span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(<span class="st">"data-synthetic"</span>)</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Set up basic parameters of the data simulation.</p>
<div class="cell">
<details class="code-fold">
<<<<<<< HEAD
<summary>Show code (simulation parameters)</summary>
=======
<summary>Show the code</summary>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">8675309</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">2000</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>diaryWaves <span class="ot">&lt;-</span> <span class="dv">21</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>panelWaves <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>studyStartDate <span class="ot">&lt;-</span> <span class="fu">as_datetime</span>(<span class="st">"2024-05-01 00:00:00"</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>studyDays <span class="ot">&lt;-</span> panelWaves <span class="sc">*</span> <span class="dv">14</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>studyDates <span class="ot">&lt;-</span> <span class="fu">ymd</span>(studyStartDate <span class="sc">+</span> <span class="fu">days</span>(<span class="dv">0</span><span class="sc">:</span>studyDays))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<<<<<<< HEAD
<section id="simulate-participant-sample" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="simulate-participant-sample"><span class="header-section-number">2.2</span> Simulate participant sample</h2>
=======
<section id="simulate-participant-sample" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="simulate-participant-sample"><span class="header-section-number">3.2</span> Simulate participant sample</h2>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<p>First we simulate the sample as taken - their age, gender, region, and gameplay tendencies. We bootstrap from existing Nintendo pilot data, but add some demographic details that are not present in the Prolific data. This takes the format of the intake questionnaire on Qualtrics, and therefore needs to import that survey.</p>
<p>We also simulate the gameplay behavior of participants - what platforms do they play on, and how frequently do they play on each of them.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Participant platforms don’t match the responses in the <code>platforms_X</code> intake items, as these are generated from Qualtrics test responses. We have a better idea of the platform distribution so we simulate that ourselves.</p>
</div>
</div>
<<<<<<< HEAD
<section id="intake" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="intake"><span class="header-section-number">2.2.1</span> Intake</h3>
<div class="cell">
<details class="code-fold">
<summary>Show code (simulate intake)</summary>
=======
<section id="intake" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="intake"><span class="header-section-number">3.2.1</span> Intake</h3>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>synIntake <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">pid =</span> <span class="fu">as.character</span>(<span class="dv">1</span><span class="sc">:</span>n),</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">region =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"US"</span>, <span class="st">"UK"</span>), n <span class="sc">/</span> <span class="dv">2</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># bootstrap each column from the non-NA values in the original data</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cbind</span>(<span class="fu">map_dfc</span>(datIntake, <span class="sc">~</span> <span class="fu">rep</span>(<span class="fu">sample</span>(.[<span class="sc">!</span><span class="fu">is.na</span>(.)], <span class="fu">length</span>(.), <span class="at">replace =</span> <span class="cn">TRUE</span>), <span class="at">length.out =</span> n))) <span class="sc">|&gt;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># for a handful of relevant columns, we override the generate test response</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># distributions with custom ones</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">ifelse</span>(region <span class="sc">==</span> <span class="st">"US"</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sample</span>(<span class="dv">18</span><span class="sc">:</span><span class="dv">30</span>, n, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sample</span>(<span class="dv">18</span><span class="sc">:</span><span class="dv">75</span>, n, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">sex =</span> <span class="fu">sample</span>(datDemo<span class="sc">$</span>sexProlific[<span class="sc">!</span><span class="fu">is.na</span>(datDemo<span class="sc">$</span>sexProlific)],</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">n</span>(),</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">replace =</span> <span class="cn">TRUE</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">employment =</span> <span class="fu">sample</span>(</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>      datDemo<span class="sc">$</span>employmentStatusProlific[<span class="sc">!</span><span class="fu">is.na</span>(datDemo<span class="sc">$</span>employmentStatusProlific) <span class="sc">&amp;</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>        datDemo<span class="sc">$</span>employmentStatusProlific <span class="sc">!=</span> <span class="st">"DATA_EXPIRED"</span>],</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">n</span>(),</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">replace =</span> <span class="cn">TRUE</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">eduLevel =</span> <span class="fu">sample</span>(datSurvey<span class="sc">$</span>eduLevel[<span class="sc">!</span><span class="fu">is.na</span>(datSurvey<span class="sc">$</span>eduLevel)], <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">ethnicity =</span> <span class="fu">sample</span>(datDemo<span class="sc">$</span>ethnicity[<span class="sc">!</span><span class="fu">is.na</span>(datDemo<span class="sc">$</span>ethnicity)], <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">height =</span> <span class="fu">ifelse</span>(sex <span class="sc">==</span> <span class="st">"Male"</span>,</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>      <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="fu">n</span>(), <span class="dv">69</span>, <span class="dv">3</span>)),</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="fu">n</span>(), <span class="dv">64</span>, <span class="dv">3</span>))</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">weight =</span> <span class="fu">ifelse</span>(sex <span class="sc">==</span> <span class="st">"Male"</span>,</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>      <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="fu">n</span>(), <span class="dv">190</span>, <span class="dv">35</span>)),</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>      <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="fu">n</span>(), <span class="dv">160</span>, <span class="dv">35</span>))</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">localTimeZone =</span> <span class="fu">sample</span>(datDemo<span class="sc">$</span>localTimeZone[<span class="sc">!</span><span class="fu">is.na</span>(datDemo<span class="sc">$</span>localTimeZone)], <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert height into feet and inches</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">height#1_1_1</span><span class="st">`</span> <span class="ot">=</span> height <span class="sc">%%</span> <span class="dv">12</span>,</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">height#1_1_2</span><span class="st">`</span> <span class="ot">=</span> height <span class="sc">%/%</span> <span class="dv">12</span>,</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">.keep =</span> <span class="st">"unused"</span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add gaming characteristics</span></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">playsSwitch =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="fu">n</span>(), <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">4</span>, .<span class="dv">6</span>), <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">playsXbox =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="fu">n</span>(), <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">5</span>, .<span class="dv">5</span>), <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">playsSteam =</span> <span class="fu">ifelse</span>(region <span class="sc">==</span> <span class="st">"US"</span>,</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="fu">n</span>(), <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">5</span>, .<span class="dv">5</span>), <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>      <span class="cn">FALSE</span></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">playsSteam =</span> <span class="fu">ifelse</span>(<span class="sc">!</span>playsSwitch <span class="sc">&amp;</span> <span class="sc">!</span>playsXbox <span class="sc">&amp;</span> <span class="sc">!</span>playsSteam, <span class="cn">TRUE</span>, playsSteam), <span class="co"># so that all players play on at least one platform</span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># for people who play on a given platform, how likely are they to play on a particular day, using beta distribution</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">dailyNintendoPlayLikelihood =</span> <span class="fu">ifelse</span>(playsSwitch, <span class="fu">rbeta</span>(<span class="fu">n</span>(), <span class="dv">2</span>, <span class="dv">8</span>), <span class="dv">0</span>),</span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">dailyXboxPlayLikelihood =</span> <span class="fu">ifelse</span>(playsXbox, <span class="fu">rbeta</span>(<span class="fu">n</span>(), <span class="dv">3</span>, <span class="dv">5</span>), <span class="dv">0</span>),</span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">dailySteamPlayLikelihood =</span> <span class="fu">ifelse</span>(playsSteam, <span class="fu">rbeta</span>(<span class="fu">n</span>(), <span class="dv">3</span>, <span class="dv">5</span>), <span class="dv">0</span>),</span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">iOSuser =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="fu">n</span>(), <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">7</span>, .<span class="dv">3</span>), <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">androidUser =</span> <span class="sc">!</span>iOSuser</span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">copy_labels</span>(datIntake)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<<<<<<< HEAD
<section id="play-history" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="play-history"><span class="header-section-number">2.2.2</span> Play History</h3>
<p>Next, we want to simulate some play behavior. We assume that each player has a fixed likelihood of playing on each platform they use on a given day. If they do play, we assume they will play between 1 and 3 sessions (or in the case of Steam, that they have logged playtime in 1-5 1-hour periods of the day). We simulate those values here.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code (simulate play history)</summary>
=======
<section id="play-history" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="play-history"><span class="header-section-number">3.2.2</span> Play History</h3>
<p>Next, we want to simulate some play behavior. We assume that each player has a fixed likelihood of playing on each platform they use on a given day. If they do play, we assume they will play between 1 and 3 sessions (or in the case of Steam, that they have logged playtime in 1-5 1-hour periods of the day). We simulate those values here.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>synPlayHistory <span class="ot">&lt;-</span> synIntake <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">crossing</span>(<span class="at">day =</span> <span class="dv">1</span><span class="sc">:</span>studyDays) <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> studyDates[day]) <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(pid, day, date, <span class="fu">starts_with</span>(<span class="fu">c</span>(<span class="st">"plays"</span>, <span class="st">"daily"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">|&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">numSessionsNintendo =</span> <span class="fu">ifelse</span>(<span class="fu">runif</span>(<span class="fu">n</span>()) <span class="sc">&lt;</span> dailyNintendoPlayLikelihood,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span>, <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">7</span>, .<span class="dv">2</span>, .<span class="dv">1</span>)),</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>      <span class="dv">0</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">numSessionsXbox =</span> <span class="fu">ifelse</span>(<span class="fu">runif</span>(<span class="fu">n</span>()) <span class="sc">&lt;</span> dailyXboxPlayLikelihood,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span>, <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">7</span>, .<span class="dv">2</span>, .<span class="dv">1</span>)),</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>      <span class="dv">0</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">numHoursWithSteamPlay =</span> <span class="fu">ifelse</span>(<span class="fu">runif</span>(<span class="fu">n</span>()) <span class="sc">&lt;</span> dailySteamPlayLikelihood,</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span>, <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">4</span>, .<span class="dv">25</span>, .<span class="dv">2</span>, .<span class="dv">1</span>, .<span class="dv">05</span>)),</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>      <span class="dv">0</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<<<<<<< HEAD
<section id="dropoutattrition" class="level3" data-number="2.2.3">
<h3 data-number="2.2.3" class="anchored" data-anchor-id="dropoutattrition"><span class="header-section-number">2.2.3</span> Dropout/attrition</h3>
<p>Here, we simulate the properties of participant dropout. We assume that participants have a base rate of missingness at each wave (5% for diary, 10% for panel), and a separate chance each day of dropping out for the rest of the study (1% for the 84 days of the study). We simulate the missingness and dropout for each participant for each day of the study, and use this information later to remove rows from the completed panel and diary surveys.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code (simulate dropout)</summary>
=======
<section id="dropoutattrition" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="dropoutattrition"><span class="header-section-number">3.2.3</span> Dropout/attrition</h3>
<p>Here, we simulate the properties of participant dropout. We assume that participants have a base rate of missingness at each wave (5% for diary, 10% for panel), and a separate chance each day of dropping out for the rest of the study (1% for the 84 days of the study). We simulate the missingness and dropout for each participant for each day of the study, and use this information later to remove rows from the completed panel and diary surveys.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>dropout <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">pid =</span> <span class="dv">1</span><span class="sc">:</span>n, <span class="at">day =</span> <span class="dv">1</span><span class="sc">:</span>studyDays) <span class="sc">|&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># first define the various time components of the study</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">diaryWave =</span> <span class="fu">ifelse</span>(day <span class="sc">&lt;=</span> <span class="dv">30</span>, day, <span class="cn">NA</span>),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">week =</span> <span class="fu">ceiling</span>(day <span class="sc">/</span> <span class="dv">7</span>),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">panelWave =</span> <span class="fu">ifelse</span>((day <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">%%</span> <span class="dv">14</span> <span class="sc">==</span> <span class="dv">0</span>, (day <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">%/%</span> <span class="dv">14</span> <span class="sc">+</span> <span class="dv">1</span>, <span class="cn">NA</span>) <span class="co"># return 1 on day 1, 2 on day 15, 3 on day 29, etc</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">as.integer</span>(pid), day) <span class="sc">|&gt;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># for simplicity, first we simulate dropout for every day of the study, then only keep the missingness on relevant days</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">missingDiary =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">05</span>, .<span class="dv">5</span>)),</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">missingPanel =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">1</span>, .<span class="dv">9</span>)),</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">dropout =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">01</span>, .<span class="dv">99</span>))</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">missingPanel =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(panelWave), <span class="cn">NA</span>, missingPanel),</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">missingDiary =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(diaryWave), <span class="cn">NA</span>, missingDiary)</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pid) <span class="sc">|&gt;</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">missingPanel =</span> <span class="fu">ifelse</span>(<span class="fu">cumsum</span>(dropout) <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="cn">TRUE</span>, missingPanel),</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">missingDiary =</span> <span class="fu">ifelse</span>(<span class="fu">cumsum</span>(dropout) <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="cn">TRUE</span>, missingDiary)</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># clean up</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pid =</span> <span class="fu">as_character</span>(pid))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<<<<<<< HEAD
<section id="simulate-telemetry" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="simulate-telemetry"><span class="header-section-number">2.3</span> Simulate Telemetry</h2>
<p>First we quickly generate a list of unique genres, which we will later randomly assign to games. In the real study, we will match games on all platforms to these same categories using the IGDB database.</p>
<section id="genres" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="genres"><span class="header-section-number">2.3.1</span> Genres</h3>
<div class="cell">
<details class="code-fold">
<summary>Show code (simulate genres)</summary>
=======
<section id="simulate-telemetry" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="simulate-telemetry"><span class="header-section-number">3.3</span> Simulate Telemetry</h2>
<p>First we quickly generate a list of unique genres, which we will later randomly assign to games. In the real study, we will match games on all platforms to these same categories using the IGDB database.</p>
<section id="genres" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="genres"><span class="header-section-number">3.3.1</span> Genres</h3>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We pull from the genres present in the Nintendo metadata (which were in turn pulled from IGDB)</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>uniqueGenres <span class="ot">&lt;-</span> datMeta <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(genres)) <span class="sc">|&gt;</span> <span class="co"># Remove NAs</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(genres, <span class="at">sep =</span> <span class="st">","</span>) <span class="sc">|&gt;</span> <span class="co"># Split by comma</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(genres) <span class="sc">|&gt;</span> <span class="co"># Get unique genres</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(genres) <span class="sc">|&gt;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<<<<<<< HEAD
<section id="nintendo" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="nintendo"><span class="header-section-number">2.3.2</span> Nintendo</h3>
<p>Next, we simulate the session-level data based on the play behavior, starting with Nintendo. For each day and session that a participant has played, we bootstrap the title, start time, and duration, from the existing data. For example, Participant 14 played Switch on Day 11, and their play was simulated to include 2 unique sessions. Games, session start times, and session durations are all drawn randomly from the real Nintendo data.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code (simulate Nintendo data)</summary>
=======
<section id="nintendo" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="nintendo"><span class="header-section-number">3.3.2</span> Nintendo</h3>
<p>Next, we simulate the session-level data based on the play behavior, starting with Nintendo. For each day and session that a participant has played, we bootstrap the title, start time, and duration, from the existing data. For example, Participant 14 played Switch on Day 11, and their play was simulated to include 2 unique sessions. Games, session start times, and session durations are all drawn randomly from the real Nintendo data.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>synNintendo <span class="ot">&lt;-</span> synPlayHistory <span class="sc">|&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(numSessionsNintendo <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">session =</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span>numSessionsNintendo)) <span class="sc">|&gt;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(session) <span class="sc">|&gt;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">titleID =</span> <span class="fu">sample</span>(datNintendo<span class="sc">$</span>titleID, <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">sessionStart =</span> date <span class="sc">+</span> <span class="fu">seconds</span>(<span class="fu">runif</span>(<span class="fu">n</span>(), <span class="dv">0</span>, <span class="dv">86400</span>)),</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">duration =</span> <span class="fu">sample</span>(datNintendo<span class="sc">$</span>duration, <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">sessionEnd =</span> sessionStart <span class="sc">+</span> <span class="fu">minutes</span>(<span class="fu">as.integer</span>(duration)),</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">genre =</span> <span class="fu">replicate</span>(<span class="fu">n</span>(), <span class="fu">assignGenres</span>(uniqueGenres)),</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>(playsSwitch<span class="sc">:</span>numHoursWithSteamPlay)) <span class="sc">|&gt;</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">platform =</span> <span class="st">"Nintendo"</span>)</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(synNintendo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 19,565
Columns: 10
$ pid          &lt;chr&gt; "10", "10", "10", "10", "100", "100", "100", "100", "100"…
$ day          &lt;int&gt; 17, 17, 17, 31, 1, 3, 9, 15, 15, 21, 21, 27, 27, 29, 32, …
$ date         &lt;date&gt; 2024-05-17, 2024-05-17, 2024-05-17, 2024-05-31, 2024-05-…
$ session      &lt;int&gt; 1, 2, 3, 1, 1, 1, 1, 1, 2, 1, 2, 1, 2, 1, 1, 1, 2, 3, 1, …
$ titleID      &lt;chr&gt; "Animal Crossing New Horizons", "Splatoon 2", "Animal Cro…
$ sessionStart &lt;dttm&gt; 2024-05-17 02:33:18, 2024-05-17 17:38:18, 2024-05-17 03:…
$ duration     &lt;dbl&gt; 38.2, 4.3, 77.3, 4.1, 52.9, 32.7, 11.3, 101.3, 74.8, 9.7,…
$ sessionEnd   &lt;dttm&gt; 2024-05-17 03:11:18, 2024-05-17 17:42:18, 2024-05-17 04:…
$ genre        &lt;chr&gt; "Sport, Strategy, MOBA", "Puzzle, Racing", "MOBA", "Visua…
$ platform     &lt;chr&gt; "Nintendo", "Nintendo", "Nintendo", "Nintendo", "Nintendo…</code></pre>
</div>
</div>
</section>
<<<<<<< HEAD
<section id="xbox" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="xbox"><span class="header-section-number">2.3.3</span> Xbox</h3>
<p>We take a similar approach for the Xbox data. However, instead of bootstrapping, we instead randomly pull from a list of an external list of Xbox games. We pull session start times from the Nintendo dataset as these are probably an equally good representation, but simulate a new set of durations as the average Xbox session is likely longer than Nintendo.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code (simulate Xbox data)</summary>
=======
<section id="xbox" class="level3" data-number="3.3.3">
<h3 data-number="3.3.3" class="anchored" data-anchor-id="xbox"><span class="header-section-number">3.3.3</span> Xbox</h3>
<p>We take a similar approach for the Xbox data. However, instead of bootstrapping, we instead randomly pull from a list of an external list of Xbox games. We pull session start times from the Nintendo dataset as these are probably an equally good representation, but simulate a new set of durations as the average Xbox session is likely longer than Nintendo.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>xboxGames <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://github.com/ItsLogic/Xbox-TitleIDs/raw/main/IDs.csv"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">300</span>, ]</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>synXbox <span class="ot">&lt;-</span> synPlayHistory <span class="sc">|&gt;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(numSessionsXbox <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">session =</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span>numSessionsXbox)) <span class="sc">|&gt;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(session) <span class="sc">|&gt;</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">titleID =</span> <span class="fu">sample</span>(xboxGames<span class="sc">$</span><span class="st">`</span><span class="at">Game Title</span><span class="st">`</span>, <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">sessionStart =</span> date <span class="sc">+</span> <span class="fu">seconds</span>(<span class="fu">runif</span>(<span class="fu">n</span>(), <span class="dv">0</span>, <span class="dv">86400</span>)),</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">duration =</span> <span class="fu">round</span>(<span class="fu">rgamma</span>(<span class="fu">n</span>(), <span class="at">shape =</span> <span class="dv">2</span>, <span class="at">rate =</span> <span class="dv">1</span>) <span class="sc">*</span> <span class="dv">60</span>, <span class="dv">2</span>),</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">sessionEnd =</span> sessionStart <span class="sc">+</span> <span class="fu">minutes</span>(<span class="fu">as.integer</span>(duration)),</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">genre =</span> <span class="fu">replicate</span>(<span class="fu">n</span>(), <span class="fu">assignGenres</span>(uniqueGenres))</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>(playsSwitch<span class="sc">:</span>numHoursWithSteamPlay)) <span class="sc">|&gt;</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">platform =</span> <span class="st">"Xbox"</span>)</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(synXbox)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 42,649
Columns: 10
$ pid          &lt;chr&gt; "10", "10", "10", "10", "10", "10", "10", "10", "10", "10…
$ day          &lt;int&gt; 10, 10, 10, 15, 15, 16, 17, 22, 23, 24, 25, 29, 30, 30, 3…
$ date         &lt;date&gt; 2024-05-10, 2024-05-10, 2024-05-10, 2024-05-15, 2024-05-…
$ session      &lt;int&gt; 1, 2, 3, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 2, 1, 1, 2, …
$ titleID      &lt;chr&gt; "Forza Street", "11-11 Memories Retold", "Shadow Fencer T…
$ sessionStart &lt;dttm&gt; 2024-05-10 10:21:25, 2024-05-10 21:12:30, 2024-05-10 12:…
$ duration     &lt;dbl&gt; 67.87, 28.36, 93.43, 193.32, 85.92, 62.88, 52.64, 79.32, …
$ sessionEnd   &lt;dttm&gt; 2024-05-10 11:28:25, 2024-05-10 21:40:30, 2024-05-10 14:…
$ genre        &lt;chr&gt; "Music", "Hack and slash/Beat 'em up", "Real Time Strateg…
$ platform     &lt;chr&gt; "Xbox", "Xbox", "Xbox", "Xbox", "Xbox", "Xbox", "Xbox", "…</code></pre>
</div>
</div>
</section>
<<<<<<< HEAD
<section id="steam" class="level3" data-number="2.3.4">
<h3 data-number="2.3.4" class="anchored" data-anchor-id="steam"><span class="header-section-number">2.3.4</span> Steam</h3>
=======
<section id="steam" class="level3" data-number="3.3.4">
<h3 data-number="3.3.4" class="anchored" data-anchor-id="steam"><span class="header-section-number">3.3.4</span> Steam</h3>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<p>Next, we move to Steam data. Here we use an existing sample of Steam data as output by Gameplay.Science (hosted on OneDrive, path specified in <code>.Renviron</code>).</p>
<p>In contrast to Xbox and Nintendo data, Steam data is not session-level; rather, it is a total amount of time spent playing each game during the previous hour. We simulate this by looking if the person played that day, simulating a random number of hours between 1-5 that they may have played, and then filling in an amount of time for each hour of play.</p>
<p>We also randomly assign genres to each game, as we did for Nintendo and Xbox.</p>
<div class="cell">
<details class="code-fold">
<<<<<<< HEAD
<summary>Show code (simulate Steam data)</summary>
=======
<summary>Show the code</summary>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># note that the code structure of the steam sim is a little different, as it derives from a different process (using LLMs to generate user personas)</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>steam <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">Sys.getenv</span>(<span class="st">"steamDataPath"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(played <span class="sc">==</span> <span class="st">"Yes"</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># with more realistic numbers of sessions per player, the loop iteration was getting prohibitively slow</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># so we assign a random persona for each observation in synPlayHistory, then suse sampleRowByID() to only sample rows from steam</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># where the ID matches.  This is much faster, with the only downside being that different days may have identical sessions,</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co"># but I don't see this as a problem for the purposes of the sim (and in fact this might have been happening before anyway?)</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>synSteam <span class="ot">&lt;-</span> synPlayHistory <span class="sc">|&gt;</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">persona =</span> <span class="fu">sample</span>(<span class="fu">unique</span>(steam<span class="sc">$</span>ID), <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> <span class="co"># assign random persona</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(numHoursWithSteamPlay <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> <span class="co"># for each day where steam play occurs</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">sampled_row =</span> <span class="fu">list</span>(<span class="fu">sampleRowByID</span>(persona, steam, numHoursWithSteamPlay)) <span class="co"># sample a certain number of hour-sessions from that persona</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(sampled_row)) <span class="sc">|&gt;</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># clean up</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(pid, day, date, <span class="at">hour =</span> time, <span class="fu">everything</span>(), <span class="sc">-</span>(playsSwitch<span class="sc">:</span>numHoursWithSteamPlay), <span class="sc">-</span>ID, <span class="sc">-</span>played) <span class="sc">|&gt;</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add some columns to match the format of the other datasets</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">sessionStart =</span> <span class="fu">as.POSIXct</span>(<span class="fu">paste</span>(date, hour), <span class="at">format =</span> <span class="st">"%Y-%m-%d %H"</span>), </span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">sessionEnd =</span> sessionStart<span class="sc">+</span><span class="fu">minutes</span>(<span class="fu">as.integer</span>(minutes))</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">as.integer</span>(pid), day, date, hour) <span class="sc">|&gt;</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">platform =</span> <span class="st">"Steam"</span>)</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(synSteam)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 65,792
Columns: 12
$ pid          &lt;chr&gt; "1", "1", "1", "1", "1", "1", "1", "1", "1", "1", "1", "1…
$ day          &lt;int&gt; 1, 1, 2, 3, 5, 5, 9, 10, 10, 10, 10, 11, 14, 14, 14, 15, …
$ date         &lt;date&gt; 2024-05-01, 2024-05-01, 2024-05-02, 2024-05-03, 2024-05-…
$ hour         &lt;dbl&gt; 1, 16, 0, 1, 1, 2, 2, 0, 1, 2, 3, 13, 1, 2, 3, 3, 6, 12, …
$ persona      &lt;dbl&gt; 293, 293, 113, 348, 317, 317, 182, 579, 579, 579, 579, 57…
$ genre        &lt;chr&gt; "Action,Adventure,Indie", "Action,Adventure,Indie", "Acti…
$ minutes      &lt;dbl&gt; 30, 30, 45, 30, 30, 25, 50, 45, 30, 50, 40, 30, 30, 50, 4…
$ AppID        &lt;dbl&gt; 231160, 2537770, 788820, 433570, 488860, 430170, 1449690,…
$ Name         &lt;chr&gt; "The Swapper", "Stay Still 2", "Lightning War", "Side Que…
$ sessionStart &lt;dttm&gt; 2024-05-01 01:00:00, 2024-05-01 16:00:00, 2024-05-02 00:…
$ sessionEnd   &lt;dttm&gt; 2024-05-01 01:30:00, 2024-05-01 16:30:00, 2024-05-02 00:…
$ platform     &lt;chr&gt; "Steam", "Steam", "Steam", "Steam", "Steam", "Steam", "St…</code></pre>
</div>
</div>
</section>
<<<<<<< HEAD
<section id="ios" class="level3" data-number="2.3.5">
<h3 data-number="2.3.5" class="anchored" data-anchor-id="ios"><span class="header-section-number">2.3.5</span> iOS</h3>
<p>iOS data consists of weekly screen time data for the below categories (pre-defined by Apple). We simulate the value of each of these categories for each participant-week using a zero-inflated gamma distribution, then add dropout as before.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code (simulate iOS data)</summary>
=======
<section id="ios" class="level3" data-number="3.3.5">
<h3 data-number="3.3.5" class="anchored" data-anchor-id="ios"><span class="header-section-number">3.3.5</span> iOS</h3>
<p>iOS data consists of weekly screen time data for the below categories (pre-defined by Apple). We simulate the value of each of these categories for each participant-week using a zero-inflated gamma distribution, then add dropout as before.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>appCategories <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Entertainment"</span>, <span class="st">"Social"</span>, <span class="st">"Information &amp; Reading"</span>, <span class="st">"Games"</span>, <span class="st">"Productivity &amp; Finance"</span>, <span class="st">"Travel"</span>, <span class="st">"Other"</span>,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Creativity"</span>, <span class="st">"Education"</span>, <span class="st">"Health &amp; Fitness"</span>, <span class="st">"Shopping &amp; Food"</span>, <span class="st">"Utilities"</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>syniOS <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">pid =</span> synIntake<span class="sc">$</span>pid[synIntake<span class="sc">$</span>iOSuser],</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">week =</span> <span class="dv">1</span><span class="sc">:</span>(panelWaves <span class="sc">*</span> <span class="dv">2</span>),</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">category =</span> appCategories</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">duration =</span> <span class="fu">sampleTime</span>(<span class="fu">n</span>()),</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> studyDates[week <span class="sc">*</span> <span class="dv">7</span> <span class="sc">-</span> <span class="dv">6</span>]</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> category, <span class="at">values_from =</span> duration, <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">totalScreentime =</span> <span class="fu">rowSums</span>(<span class="fu">select</span>(., <span class="sc">-</span><span class="fu">c</span>(pid, week, date)))) <span class="sc">|&gt;</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">1</span>, .<span class="dv">9</span>)),</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">dropout =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">01</span>, .<span class="dv">99</span>))</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pid) <span class="sc">|&gt;</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">missing =</span> <span class="fu">ifelse</span>(<span class="fu">cumsum</span>(dropout) <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="cn">TRUE</span>, missing)) <span class="sc">|&gt;</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(pid, week, date, missing, dropout, <span class="fu">everything</span>()) <span class="sc">|&gt;</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="sc">-</span><span class="fu">c</span>(pid, week, missing, dropout), <span class="sc">~</span> <span class="fu">if_else</span>(missing <span class="sc">|</span> dropout, <span class="cn">NA</span>, .))) <span class="sc">|&gt;</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">as.integer</span>(pid), week) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">platform =</span> <span class="st">"iOS"</span>)</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(syniOS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 16,836
Columns: 19
$ pid                      &lt;fct&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, …
$ week                     &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 1, 2, …
$ date                     &lt;date&gt; 2024-05-01, 2024-05-08, 2024-05-15, 2024-05-…
$ missing                  &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FAL…
$ dropout                  &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FAL…
$ Entertainment            &lt;dbl&gt; 0.0000000, 5.7292596, 2.4548014, 1.9636654, 1…
$ Social                   &lt;dbl&gt; 3.873012, 0.000000, 0.000000, 7.768210, 2.192…
$ `Information &amp; Reading`  &lt;dbl&gt; 2.0640570, 1.0929347, 0.0000000, 0.0000000, 0…
$ Games                    &lt;dbl&gt; 2.556279, 6.762721, 2.680783, 1.584198, 1.374…
$ `Productivity &amp; Finance` &lt;dbl&gt; 5.0285683, 0.0000000, 0.0000000, 0.0000000, 0…
$ Travel                   &lt;dbl&gt; 4.2951315, 4.4039391, 1.9020418, 6.9663217, 2…
$ Other                    &lt;dbl&gt; 3.105830, 0.000000, 3.684219, 1.378007, 5.816…
$ Creativity               &lt;dbl&gt; 2.6572140, 3.0750600, 4.2126908, 1.5049544, 0…
$ Education                &lt;dbl&gt; 3.5425213, 1.0298568, 4.2429778, 1.2054966, 0…
$ `Health &amp; Fitness`       &lt;dbl&gt; 4.7835503, 2.4794736, 0.0000000, 0.0000000, 1…
$ `Shopping &amp; Food`        &lt;dbl&gt; 0.0000000, 0.0000000, 5.0112091, 0.0000000, 2…
$ Utilities                &lt;dbl&gt; 2.8956759, 0.0000000, 0.0000000, 1.1620841, 0…
$ totalScreentime          &lt;dbl&gt; 34.80184, 24.57324, 24.18872, 23.53294, 17.75…
$ platform                 &lt;chr&gt; "iOS", "iOS", "iOS", "iOS", "iOS", "iOS", "iO…</code></pre>
</div>
</div>
</section>
<<<<<<< HEAD
<section id="android" class="level3" data-number="2.3.6">
<h3 data-number="2.3.6" class="anchored" data-anchor-id="android"><span class="header-section-number">2.3.6</span> Android</h3>
<p>Last, we simulate android data, bootstrapping from a sample ActivityWatch output (hosted on OneDrive, path specified in <code>.Renviron</code>).</p>
<div class="cell">
<details class="code-fold">
<summary>Show code (simulate Android data)</summary>
=======
<section id="android" class="level3" data-number="3.3.6">
<h3 data-number="3.3.6" class="anchored" data-anchor-id="android"><span class="header-section-number">3.3.6</span> Android</h3>
<p>Last, we simulate android data, bootstrapping from a sample ActivityWatch output (hosted on OneDrive, path specified in <code>.Renviron</code>).</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract and normalize the 'events' data - app sessions - which are found in the 'aw-watcher-android-test' bucket</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>androidEvents <span class="ot">&lt;-</span> datAndroid<span class="sc">$</span>buckets<span class="sc">$</span><span class="st">`</span><span class="at">aw-watcher-android-test</span><span class="st">`</span><span class="sc">$</span>events <span class="sc">|&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flatten</span>()</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>synAndroid <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">pid =</span> synIntake<span class="sc">$</span>pid[synIntake<span class="sc">$</span>androidUser],</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">day =</span> <span class="dv">1</span><span class="sc">:</span>studyDays</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">numDailyAppSessions =</span> <span class="fu">round</span>(<span class="fu">rgamma</span>(<span class="fu">n</span>(), <span class="dv">10</span>, .<span class="dv">5</span>)),</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> studyDates[day]</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> <span class="co"># simulate a random number of app sessions to have taken place that day</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">|&gt;</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">session =</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span>numDailyAppSessions)) <span class="sc">|&gt;</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(session) <span class="sc">|&gt;</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">app =</span> <span class="fu">sample</span>(androidEvents<span class="sc">$</span>data.app, <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">TRUE</span>), ,</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">sessionStart =</span> <span class="fu">sample</span>(<span class="fu">ymd_hms</span>(androidEvents<span class="sc">$</span>timestamp), <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">sessionStart =</span> <span class="fu">as.period</span>(<span class="fu">as_hms</span>(sessionStart)),</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">duration =</span> <span class="fu">sample</span>(androidEvents<span class="sc">$</span>duration, <span class="fu">n</span>(), <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">sessionEnd =</span> sessionStart <span class="sc">+</span> <span class="fu">minutes</span>(<span class="fu">as.integer</span>(duration)),</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># for simplicity at the simulation stage, we simply random assign categories to each app, matching the iOS categories</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># in the full paper, we will map apps to categories using the google play store API</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(app) <span class="sc">|&gt;</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">category =</span> <span class="fu">sample</span>(appCategories, <span class="dv">1</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">as.integer</span>(pid), day, sessionStart) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">platform =</span> <span class="st">"Android"</span>)</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(synAndroid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,001,307
Columns: 11
$ pid                 &lt;fct&gt; 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,…
$ day                 &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
$ numDailyAppSessions &lt;dbl&gt; 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26…
$ date                &lt;date&gt; 2024-05-01, 2024-05-01, 2024-05-01, 2024-05-01, 2…
$ session             &lt;int&gt; 7, 6, 15, 26, 17, 1, 23, 3, 21, 13, 20, 8, 9, 14, …
$ app                 &lt;chr&gt; "Kiwi Browser", "Samsung Internet", "Spotify", "Tr…
$ sessionStart        &lt;Period&gt; 6H 25M 37.1729998588562S, 7H 2M 26.187999963760…
$ duration            &lt;dbl&gt; 0.085, 1.168, 6.528, 22.051, 27.117, 1.377, 4.638,…
$ sessionEnd          &lt;Period&gt; 6H 25M 37.1729998588562S, 7H 3M 26.187999963760…
$ category            &lt;chr&gt; "Utilities", "Entertainment", "Travel", "Social", …
$ platform            &lt;chr&gt; "Android", "Android", "Android", "Android", "Andro…</code></pre>
</div>
</div>
</section>
</section>
<<<<<<< HEAD
<section id="simulate-self-report-data-diary-and-panel" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="simulate-self-report-data-diary-and-panel"><span class="header-section-number">2.4</span> Simulate self-report data (diary and panel)</h2>
<p>We now move to the self-report data. For both surveys, the simplest option is to just use Qualtrics’ “generate test response” feature, then pull that data using the Qualtrics API, so that the simulated data accurately mirrors the structure of the data we will later have (if not the distributional properties).</p>
<p>We’ll want to add missingness and dropout to both the panel and diary data, which we do by adding a base chance of missingness at every wave, alongside a separate chance at each wave that the participant will drop out for the rest of the study. See above for details.</p>
<section id="panel" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="panel"><span class="header-section-number">2.4.1</span> Panel</h3>
<div class="cell">
<details class="code-fold">
<summary>Show code (simulate panel data)</summary>
=======
<section id="simulate-self-report-data-diary-and-panel" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="simulate-self-report-data-diary-and-panel"><span class="header-section-number">3.4</span> Simulate self-report data (diary and panel)</h2>
<p>We now move to the self-report data. For both surveys, the simplest option is to just use Qualtrics’ “generate test response” feature, then pull that data using the Qualtrics API, so that the simulated data accurately mirrors the structure of the data we will later have (if not the distributional properties).</p>
<p>We’ll want to add missingness and dropout to both the panel and diary data, which we do by adding a base chance of missingness at every wave, alongside a separate chance at each wave that the participant will drop out for the rest of the study. See above for details.</p>
<section id="panel" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="panel"><span class="header-section-number">3.4.1</span> Panel</h3>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>synPanel <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">pid =</span> <span class="fu">as.character</span>(<span class="dv">1</span><span class="sc">:</span>n), <span class="at">wave =</span> <span class="dv">1</span><span class="sc">:</span>panelWaves) <span class="sc">|&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add random completion time between 12pm and 12pm the following day</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> studyDates[wave <span class="sc">*</span> <span class="dv">14</span> <span class="sc">-</span> <span class="dv">13</span>],</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">surveyCompletionTime =</span> date <span class="sc">+</span> <span class="fu">seconds</span>(<span class="fu">runif</span>(<span class="fu">n</span>(), <span class="dv">43200</span>, <span class="dv">129600</span>))</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># bootstrap each column from the non-NA values in the original data</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cbind</span>(<span class="fu">map_dfc</span>(datPanel, <span class="sc">~</span> <span class="fu">rep</span>(<span class="fu">sample</span>(.[<span class="sc">!</span><span class="fu">is.na</span>(.)], <span class="fu">length</span>(.), <span class="at">replace =</span> <span class="cn">TRUE</span>), <span class="at">length.out =</span> n <span class="sc">*</span> panelWaves))) <span class="sc">|&gt;</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Special transformation needs to be done to `psqi_4#1_1_1` and `psqi_4#1_1_2` columns to move values in normal range.</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">psqi_4#1_1_1</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">rescale</span>(<span class="st">`</span><span class="at">psqi_4#1_1_1</span><span class="st">`</span>, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">12</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">psqi_4#1_1_2</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">rescale</span>(<span class="st">`</span><span class="at">psqi_4#1_1_2</span><span class="st">`</span>, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">60</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># certain measures are only administered at certain waves, set these to 0 for</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># the other waves</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="fu">c</span>(<span class="st">"BFI"</span>, <span class="st">"trojan"</span>, <span class="st">"mctq"</span>)), <span class="sc">~</span> <span class="fu">ifelse</span>(wave <span class="sc">!=</span> <span class="dv">1</span>, <span class="cn">NA</span>, .))) <span class="sc">|&gt;</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"gdt"</span>), <span class="sc">~</span> <span class="fu">ifelse</span>(wave <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>), <span class="cn">NA</span>, .))) <span class="sc">|&gt;</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="fu">c</span>(<span class="st">"psqi"</span>, <span class="st">"eps"</span>)), <span class="sc">~</span> <span class="fu">ifelse</span>(wave <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>), <span class="cn">NA</span>, .))) <span class="sc">|&gt;</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># join with the relevant rows/cols of the missingness df</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(dropout <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(panelWave)) <span class="sc">|&gt;</span> <span class="fu">select</span>(pid, panelWave, missingPanel),</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"pid"</span>, <span class="st">"wave"</span> <span class="ot">=</span> <span class="st">"panelWave"</span>)</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(pid, wave, date, missingPanel, <span class="fu">everything</span>()) <span class="sc">|&gt;</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove data for all missing diary waves</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="sc">-</span><span class="fu">c</span>(pid, wave, missingPanel), <span class="sc">~</span> <span class="fu">if_else</span>(missingPanel, <span class="cn">NA</span>, .))) <span class="sc">|&gt;</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">as.numeric</span>(pid), wave) <span class="sc">|&gt;</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">copy_labels</span>(datPanel)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<details>
<summary>
Click to view the structure of the panel data
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(synPanel)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 12,000
Columns: 165
$ pid                     &lt;chr&gt; "1", "1", "1", "1", "1", "1", "2", "2", "2", "…
$ wave                    &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4…
$ date                    &lt;date&gt; 2024-05-01, 2024-05-15, 2024-05-29, 2024-06-1…
$ missingPanel            &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, FALSE,…
$ surveyCompletionTime    &lt;dttm&gt; 2024-05-02 04:46:30, 2024-05-16 07:26:35, 202…
$ problematicPlay         &lt;chr&gt; "Phasellus. Est diam per erat integer wisi nul…
$ positives               &lt;chr&gt; "Ultrices per ab massa ac euismod blandit sem …
$ gdt_1                   &lt;chr&gt; "Sometimes", NA, NA, NA, NA, NA, "Often", NA, …
$ gdt_2                   &lt;chr&gt; "Sometimes", NA, NA, NA, NA, NA, "Sometimes", …
$ gdt_3                   &lt;chr&gt; "Never", NA, NA, NA, NA, NA, "Often", NA, NA, …
$ gdt_4                   &lt;chr&gt; "Often", NA, NA, NA, NA, NA, "Often", NA, NA, …
$ mctq_1                  &lt;int&gt; 2, NA, NA, NA, NA, NA, 2, NA, NA, NA, NA, NA, …
$ mctq_2_1                &lt;int&gt; 6, NA, NA, NA, NA, NA, 2, NA, NA, NA, NA, NA, …
<<<<<<< HEAD
$ mctq_3_1                &lt;chr&gt; "04:51", NA, NA, NA, NA, NA, "22:55", NA, NA, …
$ mctq_3_2                &lt;chr&gt; "Enim felis curabitur? Molestie eu sagittis ne…
$ mctq_3_3                &lt;chr&gt; "13:19", NA, NA, NA, NA, NA, "06:32", NA, NA, …
$ mctq_3_4                &lt;dbl&gt; 39.20008, NA, NA, NA, NA, NA, 44.62950, NA, NA…
$ mctq_3_5                &lt;chr&gt; "13:05", NA, NA, NA, NA, NA, "11:05", NA, NA, …
$ mctq_3_6                &lt;dbl&gt; 5.796318, NA, NA, NA, NA, NA, 47.058190, NA, N…
$ mctq_4_1                &lt;chr&gt; "No", NA, NA, NA, NA, NA, "Yes", NA, NA, NA, N…
$ mctq_5_1                &lt;chr&gt; "No", NA, NA, NA, NA, NA, "No", NA, NA, NA, NA…
$ mctq_6_1                &lt;chr&gt; "09:40", NA, NA, NA, NA, NA, "17:08", NA, NA, …
$ mctq_6_2                &lt;chr&gt; "Sed eleifend proin rutrum. Orci culpa at luct…
$ mctq_6_3                &lt;chr&gt; "03:03", NA, NA, NA, NA, NA, "00:24", NA, NA, …
$ mctq_6_4                &lt;dbl&gt; 13.251418, NA, NA, NA, NA, NA, 56.047642, NA, …
$ mctq_6_5                &lt;chr&gt; "01:08", NA, NA, NA, NA, NA, "21:11", NA, NA, …
=======
$ mctq_3_1                &lt;chr&gt; "07:10", NA, NA, NA, NA, NA, "01:15", NA, NA, …
$ mctq_3_2                &lt;chr&gt; "Enim felis curabitur? Molestie eu sagittis ne…
$ mctq_3_3                &lt;chr&gt; "15:39", NA, NA, NA, NA, NA, "08:52", NA, NA, …
$ mctq_3_4                &lt;dbl&gt; 39.20008, NA, NA, NA, NA, NA, 44.62950, NA, NA…
$ mctq_3_5                &lt;chr&gt; "15:24", NA, NA, NA, NA, NA, "13:25", NA, NA, …
$ mctq_3_6                &lt;dbl&gt; 5.796318, NA, NA, NA, NA, NA, 47.058190, NA, N…
$ mctq_4_1                &lt;chr&gt; "No", NA, NA, NA, NA, NA, "Yes", NA, NA, NA, N…
$ mctq_5_1                &lt;chr&gt; "No", NA, NA, NA, NA, NA, "No", NA, NA, NA, NA…
$ mctq_6_1                &lt;chr&gt; "12:00", NA, NA, NA, NA, NA, "19:27", NA, NA, …
$ mctq_6_2                &lt;chr&gt; "Sed eleifend proin rutrum. Orci culpa at luct…
$ mctq_6_3                &lt;chr&gt; "05:23", NA, NA, NA, NA, NA, "02:44", NA, NA, …
$ mctq_6_4                &lt;dbl&gt; 13.251418, NA, NA, NA, NA, NA, 56.047642, NA, …
$ mctq_6_5                &lt;chr&gt; "03:28", NA, NA, NA, NA, NA, "23:31", NA, NA, …
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
$ mctq_6_6                &lt;dbl&gt; 6.658175, NA, NA, NA, NA, NA, 37.259872, NA, N…
$ mctq_7_1                &lt;chr&gt; "Yes", NA, NA, NA, NA, NA, "No", NA, NA, NA, N…
$ mctq_7_2                &lt;chr&gt; "Yes", NA, NA, NA, NA, NA, "Yes", NA, NA, NA, …
$ mctq_8_1                &lt;chr&gt; "Hobbies", NA, NA, NA, NA, NA, "Child(ren)/pet…
$ mctq_9                  &lt;chr&gt; "Auctor neque per? Quam nonummy leo ligula sed…
$ `psqi_1#1_1_1`          &lt;dbl&gt; NA, 30320142, NA, 109754050, NA, NA, NA, 14886…
$ `psqi_1#1_1_2`          &lt;dbl&gt; NA, 543316285, NA, 833081673, NA, NA, NA, 9163…
$ `psqi_1#2_1`            &lt;chr&gt; NA, "AM", NA, "AM", NA, NA, NA, "PM", NA, "AM"…
$ psqi_2                  &lt;dbl&gt; NA, 546670535, NA, 1772158820, NA, NA, NA, 189…
$ `psqi_3#1_1_1`          &lt;dbl&gt; NA, 1784034938, NA, 1489034961, NA, NA, NA, 20…
$ `psqi_3#1_1_2`          &lt;dbl&gt; NA, 1786659833, NA, 924252618, NA, NA, NA, 166…
$ `psqi_3#2_1`            &lt;chr&gt; NA, "PM", NA, "AM", NA, NA, NA, "AM", NA, "PM"…
$ `psqi_4#1_1_1`          &lt;dbl&gt; NA, 7.591414, NA, 4.088766, NA, NA, NA, 1.3164…
$ `psqi_4#1_1_2`          &lt;dbl&gt; NA, 41.987484, NA, 44.030600, NA, NA, NA, 52.9…
$ psqi_5_1                &lt;chr&gt; NA, "Once or twice a week", NA, "Less than onc…
$ psqi_5_2                &lt;chr&gt; NA, "Less than once a week", NA, "Three or mor…
$ psqi_5_3                &lt;chr&gt; NA, "Once or twice a week", NA, "Once or twice…
$ psqi_5_4                &lt;chr&gt; NA, "Three or more times a week", NA, "Once or…
$ psqi_5_5                &lt;chr&gt; NA, "Less than once a week", NA, "Three or mor…
$ psqi_5_6                &lt;chr&gt; NA, "Once or twice a week", NA, "Not during th…
$ psqi_5_7                &lt;chr&gt; NA, "Once or twice a week", NA, "Three or more…
$ psqi_5_8                &lt;chr&gt; NA, "Once or twice a week", NA, "Once or twice…
$ psqi_5_9                &lt;chr&gt; NA, "Once or twice a week", NA, "Not during th…
$ psqi_5_c                &lt;chr&gt; NA, "Etiam nec nullam blandit pede duis porta …
$ psqi_5_cr_1             &lt;chr&gt; NA, "Not during the past month", NA, "Less tha…
$ psqi_6                  &lt;int&gt; NA, 3, NA, 2, NA, NA, NA, 2, NA, 3, NA, 4, NA,…
$ psqi_7                  &lt;int&gt; NA, 3, NA, 1, NA, NA, NA, 1, NA, 3, NA, 3, NA,…
$ psqi_8                  &lt;int&gt; NA, 3, NA, 2, NA, NA, NA, 4, NA, 2, NA, 1, NA,…
$ psqi_9                  &lt;int&gt; NA, 4, NA, 2, NA, NA, NA, 3, NA, 3, NA, 2, NA,…
$ psqi_10                 &lt;int&gt; NA, 2, NA, 4, NA, NA, NA, 4, NA, 1, NA, 1, NA,…
$ psqi_10_c_1             &lt;chr&gt; NA, "Three or more times a week", NA, "Once or…
$ psqi_10_c_2             &lt;chr&gt; NA, "Less than once a week", NA, "Once or twic…
$ psqi_10_c_3             &lt;chr&gt; NA, "Not during the past month", NA, "Less tha…
$ psqi_10_c_4             &lt;chr&gt; NA, "Less than once a week", NA, "Once or twic…
$ psqi_10_c_5             &lt;chr&gt; NA, "Once or twice a week", NA, "Less than onc…
$ psqi_10_c_5_TEXT        &lt;chr&gt; NA, "Viverra? Praesent elit pharetra. Orci? Du…
$ eps_1_1                 &lt;chr&gt; NA, "No chance of dozing", NA, "High chance of…
$ eps_1_2                 &lt;chr&gt; NA, "No chance of dozing", NA, "No chance of d…
$ eps_1_3                 &lt;chr&gt; NA, "No chance of dozing", NA, "High chance of…
$ eps_1_4                 &lt;chr&gt; NA, "No chance of dozing", NA, "High chance of…
$ eps_1_5                 &lt;chr&gt; NA, "Slight chance of dozing", NA, "No chance …
$ eps_1_6                 &lt;chr&gt; NA, "High chance of dozing", NA, "Moderate cha…
$ eps_1_7                 &lt;chr&gt; NA, "High chance of dozing", NA, "No chance of…
$ eps_1_8                 &lt;chr&gt; NA, "No chance of dozing", NA, "High chance of…
$ `BFI-2-XS_1`            &lt;chr&gt; "Neutral; no opinion", NA, NA, NA, NA, NA, "Di…
$ `BFI-2-XS_2`            &lt;chr&gt; "Disagree a little", NA, NA, NA, NA, NA, "Agre…
$ `BFI-2-XS_3`            &lt;chr&gt; "Agree a little", NA, NA, NA, NA, NA, "Neutral…
$ `BFI-2-XS_4`            &lt;chr&gt; "Neutral; no opinion", NA, NA, NA, NA, NA, "Ag…
$ `BFI-2-XS_5`            &lt;chr&gt; "Agree a little", NA, NA, NA, NA, NA, "Agree a…
$ `BFI-2-XS_6`            &lt;chr&gt; "Neutral; no opinion", NA, NA, NA, NA, NA, "Ne…
$ `BFI-2-XS_7`            &lt;chr&gt; "Disagree strongly", NA, NA, NA, NA, NA, "Disa…
$ `BFI-2-XS_8`            &lt;chr&gt; "Disagree strongly", NA, NA, NA, NA, NA, "Disa…
$ `BFI-2-XS_9`            &lt;chr&gt; "Neutral; no opinion", NA, NA, NA, NA, NA, "Ne…
$ `BFI-2-XS_10`           &lt;chr&gt; "Disagree a little", NA, NA, NA, NA, NA, "Neut…
$ `BFI-2-XS_11`           &lt;chr&gt; "Neutral; no opinion", NA, NA, NA, NA, NA, "Ag…
$ `BFI-2-XS_12`           &lt;chr&gt; "Disagree a little", NA, NA, NA, NA, NA, "Disa…
$ `BFI-2-XS_13`           &lt;chr&gt; "Agree strongly", NA, NA, NA, NA, NA, "Neutral…
$ `BFI-2-XS_14`           &lt;chr&gt; "Disagree strongly", NA, NA, NA, NA, NA, "Agre…
$ `BFI-2-XS_15`           &lt;chr&gt; "Disagree a little", NA, NA, NA, NA, NA, "Disa…
$ trojan_1                &lt;chr&gt; "3", NA, NA, NA, NA, NA, "2", NA, NA, NA, NA, …
$ trojan_2                &lt;chr&gt; "3", NA, NA, NA, NA, NA, "4", NA, NA, NA, NA, …
$ trojan_3                &lt;chr&gt; "4", NA, NA, NA, NA, NA, "1 - Strongly disagre…
$ trojan_4                &lt;chr&gt; "2", NA, NA, NA, NA, NA, "3", NA, NA, NA, NA, …
$ trojan_5                &lt;chr&gt; "1 - Strongly disagree", NA, NA, NA, NA, NA, "…
$ trojan_6                &lt;chr&gt; "3", NA, NA, NA, NA, NA, "2", NA, NA, NA, NA, …
$ trojan_7                &lt;chr&gt; "4", NA, NA, NA, NA, NA, "2", NA, NA, NA, NA, …
$ trojan_8                &lt;chr&gt; "4", NA, NA, NA, NA, NA, "4", NA, NA, NA, NA, …
$ trojan_9                &lt;chr&gt; "2", NA, NA, NA, NA, NA, "4", NA, NA, NA, NA, …
$ trojan_10               &lt;chr&gt; "1 - Strongly disagree", NA, NA, NA, NA, NA, "…
$ trojan_11               &lt;chr&gt; "2", NA, NA, NA, NA, NA, "3", NA, NA, NA, NA, …
$ trojan_12               &lt;chr&gt; "2", NA, NA, NA, NA, NA, "1 - Strongly disagre…
$ trojan_13               &lt;chr&gt; "3", NA, NA, NA, NA, NA, "3", NA, NA, NA, NA, …
$ trojan_14               &lt;chr&gt; "4", NA, NA, NA, NA, NA, "4", NA, NA, NA, NA, …
$ trojan_15               &lt;chr&gt; "1 - Strongly disagree", NA, NA, NA, NA, NA, "…
$ `selfreportPlay #1_1_1` &lt;dbl&gt; 451864991, 1854152882, 1715559403, 517546130, …
$ `selfreportPlay #1_1_2` &lt;dbl&gt; 1573216261, 1923083539, 758663418, 1385740675,…
$ `selfreportPlay #1_2_1` &lt;dbl&gt; 440687077, 868777931, 1138501115, 442426895, N…
$ `selfreportPlay #1_2_2` &lt;dbl&gt; 328526617, 1627195134, 2053221620, 135050009, …
$ `selfreportPlay #1_3_1` &lt;dbl&gt; 83312732, 865433634, 1638742542, 1343099576, N…
$ `selfreportPlay #1_3_2` &lt;dbl&gt; 1951798264, 1769641675, 359766896, 1627439538,…
$ recentSessions_1_1      &lt;chr&gt; "Malesuada, convallis mattis purus accusamus m…
$ recentSessions_1_2      &lt;chr&gt; "Venenatis convallis. Sollicitudin blandit et …
$ recentSessions_1_3      &lt;chr&gt; "Potenti sagittis laoreet tellus magna. Dolor …
$ recentSessions_1_4      &lt;chr&gt; "Blandit est tempus a non donec platea felis. …
$ recentSessions_2_1      &lt;chr&gt; "Luctus maecenas malesuada elit! Sem commodo, …
$ recentSessions_2_2      &lt;chr&gt; "Tortor? Vitae cursus elit quam ut dolor at. M…
$ recentSessions_2_3      &lt;chr&gt; "Augue! Quam a id viverra interdum ipsum ultri…
$ recentSessions_2_4      &lt;chr&gt; "Diam! Tempus tortor tempor porta. Cursus wisi…
$ recentSessions_3_1      &lt;chr&gt; "Venenatis faucibus diam velit egestas malesua…
$ recentSessions_3_2      &lt;chr&gt; "Massa nibh per nulla orci ipsum. Laoreet dui …
$ recentSessions_3_3      &lt;chr&gt; "Platea nonummy sit dolorem. Pretium viverra! …
$ recentSessions_3_4      &lt;chr&gt; "Arcu interdum nullam per curabitur! Tempus ut…
$ csas                    &lt;dbl&gt; 3, 4, 1, 9, NA, NA, 0, 0, 8, 0, NA, 9, 10, 3, …
$ affectiveValence_1      &lt;dbl&gt; 44, 23, 30, 44, NA, NA, 55, 27, 10, 6, NA, 76,…
$ wemwbs_1                &lt;chr&gt; "2 - Rarely", "1 - None of the time", "3 - Som…
$ wemwbs_2                &lt;chr&gt; "5 - All of the time", "4 - Often", "2 - Rarel…
$ wemwbs_3                &lt;chr&gt; "5 - All of the time", "1 - None of the time",…
$ wemwbs_4                &lt;chr&gt; "2 - Rarely", "2 - Rarely", "4 - Often", "2 - …
$ wemwbs_5                &lt;chr&gt; "5 - All of the time", "3 - Some of the time",…
$ wemwbs_6                &lt;chr&gt; "2 - Rarely", "3 - Some of the time", "5 - All…
$ wemwbs_7                &lt;chr&gt; "2 - Rarely", "3 - Some of the time", "2 - Rar…
$ wemwbs_attCheck_1       &lt;chr&gt; "5 - All of the time", "1 - None of the time",…
$ wemwbs_attCheck_2       &lt;chr&gt; "2 - Rarely", "4 - Often", "1 - None of the ti…
$ wemwbs_attCheck_3       &lt;chr&gt; "2 - Rarely", "1 - None of the time", "2 - Rar…
$ wemwbs_attCheck_4       &lt;chr&gt; "5 - All of the time", "2 - Rarely", "1 - None…
$ wemwbs_attCheck_5       &lt;chr&gt; "4 - Often", "4 - Often", "1 - None of the tim…
$ wemwbs_attCheck_6       &lt;chr&gt; "1 - None of the time", "3 - Some of the time"…
$ wemwbs_attCheck_7       &lt;chr&gt; "5 - All of the time", "3 - Some of the time",…
$ promis_1                &lt;chr&gt; "Rarely", "Never", "Sometimes", "Rarely", NA, …
$ promis_2                &lt;chr&gt; "Always", "Rarely", "Rarely", "Often", NA, NA,…
$ promis_3                &lt;chr&gt; "Never", "Often", "Often", "Always", NA, NA, "…
$ promis_4                &lt;chr&gt; "Never", "Always", "Often", "Never", NA, NA, "…
$ promis_5                &lt;chr&gt; "Sometimes", "Never", "Never", "Often", NA, NA…
$ promis_6                &lt;chr&gt; "Sometimes", "Rarely", "Rarely", "Never", NA, …
$ promis_7                &lt;chr&gt; "Rarely", "Often", "Sometimes", "Rarely", NA, …
$ promis_8                &lt;chr&gt; "Never", "Sometimes", "Often", "Sometimes", NA…
$ bangs_1                 &lt;chr&gt; "2", "4Neither Agree nor Disagree", "2", "3", …
$ bangs_2                 &lt;chr&gt; "1 \nStrongly Disagree", "3", "3", "1 \nStrong…
$ bangs_3                 &lt;chr&gt; "2", "5", "7 Strongly agree", "2", NA, NA, "5"…
$ bangs_4                 &lt;chr&gt; "4Neither Agree nor Disagree", "5", "2", "3", …
$ bangs_5                 &lt;chr&gt; "7 Strongly agree", "2", "1 \nStrongly Disagre…
$ bangs_6                 &lt;chr&gt; "4Neither Agree nor Disagree", "2", "3", "7 St…
$ bangs_7                 &lt;chr&gt; "7 Strongly agree", "1 \nStrongly Disagree", "…
$ bangs_8                 &lt;chr&gt; "7 Strongly agree", "3", "7 Strongly agree", "…
$ bangs_9                 &lt;chr&gt; "6", "5", "5", "2", NA, NA, "1 \nStrongly Disa…
$ bangs_10                &lt;chr&gt; "5", "1 \nStrongly Disagree", "7 Strongly agre…
$ bangs_11                &lt;chr&gt; "2", "7 Strongly agree", "3", "2", NA, NA, "4N…
$ bangs_12                &lt;chr&gt; "2", "5", "7 Strongly agree", "1 \nStrongly Di…
$ bangs_13                &lt;chr&gt; "2", "2", "3", "6", NA, NA, "1 \nStrongly Disa…
$ bangs_14                &lt;chr&gt; "7 Strongly agree", "3", "3", "6", NA, NA, "3"…
$ bangs_15                &lt;chr&gt; "1 \nStrongly Disagree", "4Neither Agree nor D…
$ bangs_16                &lt;chr&gt; "4Neither Agree nor Disagree", "2", "7 Strongl…
$ bangs_17                &lt;chr&gt; "6", "1 \nStrongly Disagree", "6", "5", NA, NA…
$ bangs_18                &lt;chr&gt; "3", "2", "5", "1 \nStrongly Disagree", NA, NA…
$ displacement_1          &lt;chr&gt; "Greatly supported", "Slightly interfered", "G…
$ displacement_2          &lt;chr&gt; "Greatly interfered", "Slightly supported", "M…
$ displacement_3          &lt;chr&gt; "Slightly supported", "No impact", "Moderately…
$ displacement_4          &lt;chr&gt; "Slightly supported", "No impact", "Greatly su…
$ displacement_5          &lt;chr&gt; "Greatly supported", "No impact", "Moderately …</code></pre>
</div>
</div>
</details>
</section>
<<<<<<< HEAD
<section id="diary" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="diary"><span class="header-section-number">2.4.2</span> Diary</h3>
<div class="cell">
<details class="code-fold">
<summary>Show code (simulate diary data)</summary>
=======
<section id="diary" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="diary"><span class="header-section-number">3.4.2</span> Diary</h3>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>synDiary <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">pid =</span> synIntake<span class="sc">$</span>pid[synIntake<span class="sc">$</span>region <span class="sc">==</span> <span class="st">"US"</span>], <span class="at">day =</span> <span class="dv">1</span><span class="sc">:</span>diaryWaves) <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> studyDates[day],</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">surveyCompletionTime =</span> date <span class="sc">+</span> <span class="fu">seconds</span>(<span class="fu">runif</span>(<span class="fu">n</span>(), <span class="dv">64800</span>, <span class="dv">93600</span>)) <span class="co"># add time so that the survey is randomly completed between 6pm and 2am</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># bootstrap each column from the non-NA values in the original data</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cbind</span>(<span class="fu">map_dfc</span>(datDiary, <span class="sc">~</span> <span class="fu">rep</span>(<span class="fu">sample</span>(.[<span class="sc">!</span><span class="fu">is.na</span>(.)], <span class="fu">length</span>(.), <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">length.out =</span> <span class="fu">length</span>(synIntake<span class="sc">$</span>pid[synIntake<span class="sc">$</span>region <span class="sc">==</span> <span class="st">"US"</span>]) <span class="sc">*</span> diaryWaves</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  ))) <span class="sc">|&gt;</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># join with missingness df</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(dropout <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(diaryWave)) <span class="sc">|&gt;</span> <span class="fu">select</span>(pid, diaryWave, missingDiary),</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"pid"</span>, <span class="st">"day"</span> <span class="ot">=</span> <span class="st">"diaryWave"</span>)</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove data for all missing diary waves, and removing gaming data when the</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># participant didn't play in the last 24 hours</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="sc">-</span><span class="fu">c</span>(pid, day, date, missingDiary), <span class="sc">~</span> <span class="fu">if_else</span>(missingDiary, <span class="cn">NA</span>, .)),</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="fu">c</span>(<span class="st">"socialGaming"</span>, <span class="st">"bangs"</span>, <span class="st">"mostRecentGame"</span>, <span class="st">"displaced"</span>)), <span class="sc">~</span> <span class="fu">ifelse</span>(played24hr <span class="sc">==</span> <span class="st">"No"</span>, <span class="cn">NA</span>, .)) <span class="co"># remove gaming data</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># clean up</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(pid, day, date, missingDiary, <span class="fu">everything</span>()) <span class="sc">|&gt;</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">as.integer</span>(pid), day) <span class="sc">|&gt;</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">copy_labels</span>(datDiary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<details>
<summary>
Click to view the structure of the diary data
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(synDiary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 21,000
Columns: 70
$ pid                  &lt;chr&gt; "1", "1", "1", "1", "1", "1", "1", "1", "1", "1",…
$ day                  &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15…
$ date                 &lt;date&gt; 2024-05-01, 2024-05-02, 2024-05-03, 2024-05-04, …
$ missingDiary         &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, …
$ surveyCompletionTime &lt;dttm&gt; 2024-05-01 19:17:25, 2024-05-02 19:12:14, 2024-0…
$ played24hr           &lt;ord&gt; Yes, Yes, No, Yes, Yes, Yes, No, No, Yes, No, No,…
$ socialGaming_4       &lt;chr&gt; "Single-player games only", "Single-player games …
$ socialGaming_5       &lt;chr&gt; "Multiplayer with real-world friends", "Multiplay…
$ socialGaming_6       &lt;chr&gt; "Multiplayer with online-only friends", "Multipla…
$ socialGaming_7       &lt;chr&gt; "Multiplayer with strangers", "Multiplayer with s…
$ mostRecentGame       &lt;chr&gt; "Rhoncus lacus egestas imperdiet augue mo", "Prae…
$ bangs_1              &lt;chr&gt; "2", "5", NA, "4Neither Agree nor Disagree", "5",…
$ bangs_2              &lt;chr&gt; "2", "3", NA, "1 \nStrongly Disagree", "4Neither …
$ bangs_3              &lt;chr&gt; "5", "3", NA, "4Neither Agree nor Disagree", "6",…
$ bangs_4              &lt;chr&gt; "4Neither Agree nor Disagree", "1 \nStrongly Disa…
$ bangs_5              &lt;chr&gt; "5", "6", NA, "7 Strongly agree", "5", "6", NA, N…
$ bangs_6              &lt;chr&gt; "2", "4Neither Agree nor Disagree", NA, "5", "4Ne…
$ displacedActivity    &lt;chr&gt; "Nonummy placerat? Phasellus placerat. Tincidunt …
$ lifeSat_1            &lt;dbl&gt; 32, 98, 89, 30, 59, 51, 51, 75, 57, 85, 33, 74, 7…
$ affectiveValence_1   &lt;dbl&gt; 52, 95, 43, 81, 65, 92, 52, 38, 46, 57, 60, 81, 4…
$ bpnsfs_1             &lt;chr&gt; "2 - strongly disagree", "4 - neither disagree no…
$ bpnsfs_2             &lt;chr&gt; "4 - neither disagree nor agree", "5 - agree", "3…
$ bpnsfs_3             &lt;chr&gt; "5 - agree", "3 - disagree", "5 - agree", "1 - ve…
$ bpnsfs_4             &lt;chr&gt; "5 - agree", "3 - disagree", "4 - neither disagre…
$ bpnsfs_5             &lt;chr&gt; "3 - disagree", "4 - neither disagree nor agree",…
$ bpnsfs_6             &lt;chr&gt; "5 - agree", "1 - very strongly disagree", "1 - v…
$ sd_0                 &lt;ord&gt; Vacation day, Other (please specify):, Weekend, H…
$ sd_0_8_TEXT          &lt;chr&gt; "Felis? Posuere magna ipsum volutpat, gravida ab …
$ `sd_1#1_1_1`         &lt;dbl&gt; 1603849685, 894379514, 735841771, 1602488313, 128…
$ `sd_1#1_1_2`         &lt;dbl&gt; 1567469283, 1691810101, 930545705, 862698895, 791…
$ `sd_1#2_1`           &lt;chr&gt; "AM", "PM", "PM", "AM", "PM", "PM", "AM", "AM", "…
$ `sd_2#1_1_1`         &lt;dbl&gt; 485500086, 104054518, 1169408008, 140056431, 1836…
$ `sd_2#1_1_2`         &lt;dbl&gt; 1204348752, 1861270655, 545564080, 238349578, 981…
$ `sd_2#2_1`           &lt;chr&gt; "AM", "PM", "PM", "PM", "PM", "AM", "PM", "AM", "…
$ sd_3                 &lt;dbl&gt; 2132146993, 1606313892, 1789753926, 1804958614, 1…
$ `sd_4#1_1_1`         &lt;dbl&gt; 466056748, 307429782, 1257880481, 286159513, 1318…
$ `sd_4#1_1_2`         &lt;dbl&gt; 851300260, 1380056229, 719718577, 870500403, 1275…
$ `sd_4#2_1`           &lt;chr&gt; "AM", "PM", "AM", "AM", "PM", "PM", "PM", "AM", "…
$ `sd_5#1_1_1`         &lt;dbl&gt; 341739502, 242494822, 1001144473, 1130461394, 208…
$ `sd_5#1_1_2`         &lt;dbl&gt; 1255753273, 1468794244, 824672027, 2002728982, 51…
$ `sd_5#2_1`           &lt;chr&gt; "AM", "AM", "PM", "PM", "AM", "PM", "PM", "PM", "…
$ sd_6                 &lt;ord&gt; Good, Very good, Fair, Very poor, Very poor, Very…
$ timeUse_5            &lt;dbl&gt; 6, 10, 7, 10, 0, 13, 14, 4, 1, 13, 2, 13, 5, 0, 8…
$ timeUse_6            &lt;dbl&gt; 14, 1, 14, 1, 10, 7, 7, 6, 9, 12, 3, 1, 4, 10, 4,…
$ timeUse_1            &lt;dbl&gt; 7, 7, 4, 1, 2, 0, 6, 4, 0, 1, 3, 3, 1, 0, 10, 1, …
$ timeUse_2            &lt;dbl&gt; 0, 2, 0, 7, 6, 3, 1, 7, 0, 2, 11, 2, 1, 0, 2, 1, …
$ timeUse_3            &lt;dbl&gt; 1.0, 0.0, 0.0, 0.0, 4.1, 0.0, 8.0, 1.0, 0.0, 0.0,…
$ timeUse_4            &lt;dbl&gt; 2, 0, 4, 2, 0, 0, 2, 1, 0, 5, 2, 0, 1, 0, 0, 0, 2…
$ timeUse_7            &lt;dbl&gt; 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 2…
$ timeUse_8            &lt;dbl&gt; 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ timeUse_9            &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1…
$ timeUse_10           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ timeUse_11           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ timeUse_12           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ timeUse_13           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ timeUse_14           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ stress_argument      &lt;ord&gt; No, No, Yes, No, No, Yes, No, No, No, Yes, Yes, N…
$ howStress_arg        &lt;chr&gt; "Not very", "Not at all", "Very", "Somewhat", "Ve…
$ stress_letpass       &lt;ord&gt; Yes, Yes, No, No, Yes, Yes, Yes, No, Yes, Yes, Ye…
$ howStress_letPass    &lt;ord&gt; Somewhat, Very, Not very, Not very, Not very, Som…
$ stress_school        &lt;ord&gt; No, Yes, No, No, Yes, Yes, No, Yes, Yes, No, No, …
$ howStress_school     &lt;ord&gt; Not very, Not very, Very, Somewhat, Somewhat, Som…
$ stress_home          &lt;ord&gt; No, Yes, Yes, Yes, Yes, Yes, Yes, No, No, Yes, Ye…
$ howStress_home       &lt;ord&gt; Not very, Very, Not very, Very, Not at all, Very,…
$ stress_discrim       &lt;ord&gt; No, No, No, No, No, Yes, No, No, No, No, Yes, No,…
$ howStress_discrim    &lt;ord&gt; Not at all, Not at all, Not at all, Not at all, S…
$ stress_relative      &lt;ord&gt; No, Yes, Yes, No, No, No, Yes, Yes, Yes, No, No, …
$ howStress_relative   &lt;ord&gt; Not very, Very, Not at all, Somewhat, Very, Very,…
$ stress_other         &lt;ord&gt; No, No, No, No, No, Yes, No, Yes, No, Yes, Yes, Y…
$ howStress_other      &lt;ord&gt; Very, Not at all, Not at all, Very, Very, Not ver…</code></pre>
</div>
</div>
</details>
</section>
</section>
<<<<<<< HEAD
<section id="generate-codebook" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="generate-codebook"><span class="header-section-number">2.5</span> Generate Codebook</h2>
<p>Generate <code>codebook.xlsx</code>.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code (generate codebook</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>metaInfo <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>Tab, <span class="sc">~</span><span class="st">`</span><span class="at">Data File</span><span class="st">`</span>, <span class="sc">~</span>Content,</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Intake"</span>, <span class="st">"data-synthetic/synIntake.csv.gz"</span>, <span class="st">"Data on participant demographics and gaming habits"</span>,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Panel"</span>, <span class="st">"data-synthetic/synPanel.csv.gz"</span>, <span class="st">"Wellbeing, sleep and time use data from the panel survey"</span>,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Diary"</span>, <span class="st">"data-synthetic/synDiary.csv.gz"</span>, <span class="st">"Daily diary data on gaming, wellbeing, and sleep"</span>,</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Nintendo"</span>, <span class="st">"data-synthetic/synNintendo.csv.gz"</span>, <span class="st">"Telemetry data (session-level) from the Nintendo Switch"</span>,</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Xbox"</span>, <span class="st">"data-synthetic/synXbox.csv.gz"</span>, <span class="st">"Telemetry data (session-level) from Xbox devices"</span>,</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Steam"</span>, <span class="st">"data-synthetic/synSteam.csv.gz"</span>, <span class="st">"Telemetry data (total playtime in 1 hour blocks) from Steam"</span>,</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"iOS"</span>, <span class="st">"data-synthetic/syniOS.csv.gz"</span>, <span class="st">"Screen time data from iOS devices, pulled from screenshots of the Screen time app"</span>,</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Android"</span>, <span class="st">"data-synthetic/synAndroid.csv.gz"</span>, <span class="st">"App usage data from Android devices, pulled from ActivityWatch"</span></span>
=======
<section id="generate-codebook" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="generate-codebook"><span class="header-section-number">3.5</span> Generate Codebook</h2>
<p>Generate <code>codebook.xlsx</code>.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>metaInfo <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>Tab, <span class="sc">~</span><span class="st">`</span><span class="at">Data File</span><span class="st">`</span>, <span class="sc">~</span>Content,</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Intake"</span>, <span class="st">"data-synthetic/synIntake.csv"</span>, <span class="st">"Data on participant demographics and gaming habits"</span>,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Panel"</span>, <span class="st">"data-synthetic/synPanel.csv"</span>, <span class="st">"Wellbeing, sleep and time use data from the panel survey"</span>,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Diary"</span>, <span class="st">"data-synthetic/synDiary.csv"</span>, <span class="st">"Daily diary data on gaming, wellbeing, and sleep"</span>,</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Nintendo"</span>, <span class="st">"data-synthetic/synNintendo.csv"</span>, <span class="st">"Telemetry data (session-level) from the Nintendo Switch"</span>,</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Xbox"</span>, <span class="st">"data-synthetic/synXbox.csv"</span>, <span class="st">"Telemetry data (session-level) from Xbox devices"</span>,</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Steam"</span>, <span class="st">"data-synthetic/synSteam.csv"</span>, <span class="st">"Telemetry data (total playtime in 1 hour blocks) from Steam"</span>,</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"iOS"</span>, <span class="st">"data-synthetic/syniOS.csv"</span>, <span class="st">"Screen time data from iOS devices, pulled from screenshots of the Screen time app"</span>,</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Android"</span>, <span class="st">"data-synthetic/synAndroid.csv"</span>, <span class="st">"App usage data from Android devices, pulled from ActivityWatch"</span></span>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>intakeCodebook <span class="ot">&lt;-</span> synIntake <span class="sc">|&gt;</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_label</span>() <span class="sc">|&gt;</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">enframe</span>() <span class="sc">|&gt;</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(value, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"stem"</span>, <span class="st">"item"</span>), <span class="at">sep =</span> <span class="st">" - "</span>, <span class="at">extra =</span> <span class="st">"merge"</span>, <span class="at">fill =</span> <span class="st">"right"</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">Item =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(item), value, item),</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Stem text</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">if_else</span>(<span class="fu">grepl</span>(<span class="st">" - "</span>, value), stem, <span class="cn">NA</span>),</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">.keep =</span> <span class="st">"unused"</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>panelCodebook <span class="ot">&lt;-</span> synPanel <span class="sc">|&gt;</span></span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_label</span>() <span class="sc">|&gt;</span></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">enframe</span>() <span class="sc">|&gt;</span></span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(value, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"stem"</span>, <span class="st">"item"</span>), <span class="at">sep =</span> <span class="st">" - "</span>, <span class="at">extra =</span> <span class="st">"drop"</span>, <span class="at">fill =</span> <span class="st">"right"</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">Item =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(item), value, item),</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Stem text</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">if_else</span>(<span class="fu">grepl</span>(<span class="st">" - "</span>, value), stem, <span class="cn">NA</span>),</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">.keep =</span> <span class="st">"unused"</span></span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">Source =</span> <span class="fu">case_when</span>(</span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"wemwbs"</span>, name) <span class="sc">~</span> <span class="st">"Warwick-Edinburgh Mental Wellbeing Scale (https://doi.org/10.1186/1477-7525-5-63)"</span>,</span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"promis"</span>, name) <span class="sc">~</span> <span class="st">"PROMIS Short Form 8a Adult Depression Scale (https://doi.org/10.1177/1073191111411667)"</span>,</span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"bangs"</span>, name) <span class="sc">~</span> <span class="st">"Basic Needs in Games Scale (https://doi.org/10.31234/osf.io/4965z7)"</span>,</span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"trojan"</span>, name) <span class="sc">~</span> <span class="st">"Trojan Player Typology (https://doi.org/10.1016/j.chb.2015.03.018)"</span>,</span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"gdt"</span>, name) <span class="sc">~</span> <span class="st">"Gaming Disorder Test (https://doi.org/10.1007/s11469-019-00088-z)"</span>,</span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"mctq"</span>, name) <span class="sc">~</span> <span class="st">"Munich Chronotype Questionnaire (https://doi.org/10.1177/0748730402239679)"</span>,</span>
<span id="cb26-40"><a href="#cb26-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"pqsi"</span>, name) <span class="sc">~</span> <span class="st">"Pittsburgh Sleep Quality Index (https://doi.org/10.1016/0165-1781(89)90047-4)"</span>,</span>
<span id="cb26-41"><a href="#cb26-41" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"eps"</span>, name) <span class="sc">~</span> <span class="st">"Epwoth Sleepiness Scale (https://doi.org/10.1093/sleep/14.6.540)"</span>,</span>
<span id="cb26-42"><a href="#cb26-42" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"BFI"</span>, name) <span class="sc">~</span> <span class="st">"Extra-short Big Five Inventory–2 (https://doi.org/10.1016/j.jrp.2017.02.004)"</span>,</span>
<span id="cb26-43"><a href="#cb26-43" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"lifeSat"</span>, name) <span class="sc">~</span> <span class="st">"Cantril Self-anchoring Scale (Cantril, 1965)"</span>,</span>
<span id="cb26-44"><a href="#cb26-44" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">""</span></span>
<span id="cb26-45"><a href="#cb26-45" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb26-46"><a href="#cb26-46" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Response Options</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb26-47"><a href="#cb26-47" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"wemwbs"</span>, name) <span class="sc">~</span> <span class="st">"1 - None of the time; 2 - Rarely; 3 - Some of the time; 4 - Often; 5 - All of the time"</span>,</span>
<span id="cb26-48"><a href="#cb26-48" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"promis"</span>, name) <span class="sc">~</span> <span class="st">"Never; Rarely; Sometimes; Often; Never"</span>,</span>
<span id="cb26-49"><a href="#cb26-49" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"bangs"</span>, name) <span class="sc">~</span> <span class="st">"1 Strongly Disagree; 2; 3; 4 Neither Agree nor Disagree; 5; 6; 7 Strongly Agree"</span>,</span>
<span id="cb26-50"><a href="#cb26-50" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"trojan"</span>, name) <span class="sc">~</span> <span class="st">"1 - Strongly disagree; 2; 3; 4; 5 - Strongly agree"</span>,</span>
<span id="cb26-51"><a href="#cb26-51" aria-hidden="true" tabindex="-1"></a>      name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"problematicPlay"</span>, <span class="st">"positives"</span>) <span class="sc">~</span> <span class="st">"free text response"</span>,</span>
<span id="cb26-52"><a href="#cb26-52" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"displacement"</span>, name) <span class="sc">~</span> <span class="st">"Greatly interfered; Moderately interfered; Slightly interfered; No impact; Slightly supported;</span></span>
<span id="cb26-53"><a href="#cb26-53" aria-hidden="true" tabindex="-1"></a><span class="st">Moderately supported; Greatly supported"</span>,</span>
<span id="cb26-54"><a href="#cb26-54" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"timeUse"</span>, name) <span class="sc">~</span> <span class="st">"slider from 0-16 hours, with increments of .1"</span>,</span>
<span id="cb26-55"><a href="#cb26-55" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"eps"</span>, name) <span class="sc">~</span> <span class="st">"No chance of dozing; Slight chance of dozing; Moderate chance of dozing; High chance of dozing"</span>,</span>
<span id="cb26-56"><a href="#cb26-56" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"BFI"</span>, name) <span class="sc">~</span> <span class="st">"Disagree strongly; Disagree a little; Neutral, no opinion; Agree a little; Agree strongly"</span>,</span>
<span id="cb26-57"><a href="#cb26-57" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"lifeSat"</span>, name) <span class="sc">~</span> <span class="st">"1-100 sliding scale"</span>,</span>
<span id="cb26-58"><a href="#cb26-58" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">""</span></span>
<span id="cb26-59"><a href="#cb26-59" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb26-60"><a href="#cb26-60" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Stem text</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">"[</span><span class="sc">\r\n</span><span class="st">]"</span>, <span class="st">""</span>, <span class="st">`</span><span class="at">Stem text</span><span class="st">`</span>)</span>
<span id="cb26-61"><a href="#cb26-61" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb26-62"><a href="#cb26-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Variable =</span> name)</span>
<span id="cb26-63"><a href="#cb26-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-64"><a href="#cb26-64" aria-hidden="true" tabindex="-1"></a>diaryCodebook <span class="ot">&lt;-</span> synDiary <span class="sc">|&gt;</span></span>
<span id="cb26-65"><a href="#cb26-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_label</span>() <span class="sc">|&gt;</span></span>
<span id="cb26-66"><a href="#cb26-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">enframe</span>() <span class="sc">|&gt;</span></span>
<span id="cb26-67"><a href="#cb26-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(value, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"stem"</span>, <span class="st">"item"</span>), <span class="at">sep =</span> <span class="st">" - "</span>, <span class="at">extra =</span> <span class="st">"drop"</span>, <span class="at">fill =</span> <span class="st">"right"</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb26-68"><a href="#cb26-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb26-69"><a href="#cb26-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">Item =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(item), value, item),</span>
<span id="cb26-70"><a href="#cb26-70" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Stem text</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">if_else</span>(<span class="fu">grepl</span>(<span class="st">" - "</span>, value), stem, <span class="cn">NA</span>),</span>
<span id="cb26-71"><a href="#cb26-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">.keep =</span> <span class="st">"unused"</span></span>
<span id="cb26-72"><a href="#cb26-72" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb26-73"><a href="#cb26-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb26-74"><a href="#cb26-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">Source =</span> <span class="fu">case_when</span>(</span>
<span id="cb26-75"><a href="#cb26-75" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"bangs"</span>, name) <span class="sc">~</span> <span class="st">"Basic Needs in Games Scale (https://doi.org/10.31234/osf.io/4965z7)"</span>,</span>
<span id="cb26-76"><a href="#cb26-76" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"bpnsfs"</span>, name) <span class="sc">~</span> <span class="st">"Basic Psychological Need Satisfaction and Frustration Scale (https://doi.org/10.1007/s11031-014-9450-1), brief version (https://doi.org/1015-5759/a000846)"</span>,</span>
<span id="cb26-77"><a href="#cb26-77" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"stress|howStress"</span>, name) <span class="sc">~</span> <span class="st">"Daily Inventory of Stressful Events (https://doi.org/10.1177/1073191102091006)"</span>,</span>
<span id="cb26-78"><a href="#cb26-78" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"sd_"</span>, name) <span class="sc">~</span> <span class="st">"Consensus Sleep Diary (https://doi.org/10.5665/sleep.1642)"</span>,</span>
<span id="cb26-79"><a href="#cb26-79" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"lifeSat"</span>, name) <span class="sc">~</span> <span class="st">"Cantril Self-anchoring Scale (Cantril, 1965)"</span>,</span>
<span id="cb26-80"><a href="#cb26-80" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">""</span></span>
<span id="cb26-81"><a href="#cb26-81" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb26-82"><a href="#cb26-82" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Response Options</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb26-83"><a href="#cb26-83" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"bangs"</span>, name) <span class="sc">~</span> <span class="fu">paste</span>(<span class="fu">names</span>(<span class="fu">table</span>(synDiary<span class="sc">$</span>bangs_1)), <span class="at">collapse =</span> <span class="st">"; "</span>),</span>
<span id="cb26-84"><a href="#cb26-84" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"bpnsfs"</span>, name) <span class="sc">~</span> <span class="fu">paste</span>(<span class="fu">names</span>(<span class="fu">table</span>(synDiary<span class="sc">$</span>bpnsfs_1)), <span class="at">collapse =</span> <span class="st">"; "</span>),</span>
<span id="cb26-85"><a href="#cb26-85" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"timeUse"</span>, name) <span class="sc">~</span> <span class="st">"slider from 0-16 hours, with increments of .1"</span>,</span>
<span id="cb26-86"><a href="#cb26-86" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"^stress"</span>, name) <span class="sc">~</span> <span class="st">"Yes; No"</span>,</span>
<span id="cb26-87"><a href="#cb26-87" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"howStress"</span>, name) <span class="sc">~</span> <span class="st">"Not at all; Not very; Somewhat; Very"</span>,</span>
<span id="cb26-88"><a href="#cb26-88" aria-hidden="true" tabindex="-1"></a>      name <span class="sc">==</span> <span class="st">"sd_0"</span> <span class="sc">~</span> <span class="st">"Regular work day; Regular day off; Weekend; Holiday; Vacation day Other (please specify):"</span>,</span>
<span id="cb26-89"><a href="#cb26-89" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"lifeSat"</span>, name) <span class="sc">~</span> <span class="st">"1-100 sliding scale"</span>,</span>
<span id="cb26-90"><a href="#cb26-90" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">""</span></span>
<span id="cb26-91"><a href="#cb26-91" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb26-92"><a href="#cb26-92" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Stem text</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">gsub</span>(<span class="st">"[</span><span class="sc">\r\n</span><span class="st">]"</span>, <span class="st">""</span>, <span class="st">`</span><span class="at">Stem text</span><span class="st">`</span>)</span>
<span id="cb26-93"><a href="#cb26-93" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb26-94"><a href="#cb26-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Variable =</span> name)</span>
<span id="cb26-95"><a href="#cb26-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-96"><a href="#cb26-96" aria-hidden="true" tabindex="-1"></a>nintendoCodebook <span class="ot">&lt;-</span> synNintendo <span class="sc">|&gt;</span></span>
<span id="cb26-97"><a href="#cb26-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">var_labels</span>(</span>
<span id="cb26-98"><a href="#cb26-98" aria-hidden="true" tabindex="-1"></a>    <span class="at">pid =</span> <span class="st">"A unique identifier assigned to each participant in the study."</span>,</span>
<span id="cb26-99"><a href="#cb26-99" aria-hidden="true" tabindex="-1"></a>    <span class="at">day =</span> <span class="st">"The day number relative to the start of the study (e.g., Day 1, Day 2)."</span>,</span>
<span id="cb26-100"><a href="#cb26-100" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> <span class="st">"The calendar date on which the gaming session occurred (format: YYYY-MM-DD)."</span>,</span>
<span id="cb26-101"><a href="#cb26-101" aria-hidden="true" tabindex="-1"></a>    <span class="at">session =</span> <span class="st">"A sequential identifier for each gaming session on a given day for the participant."</span>,</span>
<span id="cb26-102"><a href="#cb26-102" aria-hidden="true" tabindex="-1"></a>    <span class="at">titleID =</span> <span class="st">"The name of the game played during the session."</span>,</span>
<span id="cb26-103"><a href="#cb26-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">sessionStart =</span> <span class="st">"The time of day when the gaming session began (format: HH:MM:SS)."</span>,</span>
<span id="cb26-104"><a href="#cb26-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">duration =</span> <span class="st">"The length of the gaming session in minutes."</span>,</span>
<span id="cb26-105"><a href="#cb26-105" aria-hidden="true" tabindex="-1"></a>    <span class="at">genre =</span> <span class="st">"The genre(s) of the game played (e.g., Action, Puzzle, Role-Playing), using IGDB categories."</span>,</span>
<span id="cb26-106"><a href="#cb26-106" aria-hidden="true" tabindex="-1"></a>    <span class="at">platform =</span> <span class="st">"The platform on which the game was played, for use in future merging (here: always Nintendo)."</span></span>
<span id="cb26-107"><a href="#cb26-107" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb26-108"><a href="#cb26-108" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_label</span>() <span class="sc">|&gt;</span></span>
<span id="cb26-109"><a href="#cb26-109" aria-hidden="true" tabindex="-1"></a>  <span class="fu">enframe</span>(<span class="at">name =</span> <span class="st">"Variable"</span>, <span class="at">value =</span> <span class="st">"Description"</span>) <span class="sc">|&gt;</span></span>
<span id="cb26-110"><a href="#cb26-110" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Notes =</span> <span class="fu">case_when</span>(</span>
<span id="cb26-111"><a href="#cb26-111" aria-hidden="true" tabindex="-1"></a>    Variable <span class="sc">==</span> <span class="st">"genre"</span> <span class="sc">~</span> <span class="fu">paste0</span>(<span class="st">"Possible genres are: "</span>, <span class="fu">paste</span>(uniqueGenres, <span class="at">collapse =</span> <span class="st">", "</span>)),</span>
<span id="cb26-112"><a href="#cb26-112" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">""</span></span>
<span id="cb26-113"><a href="#cb26-113" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb26-114"><a href="#cb26-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-115"><a href="#cb26-115" aria-hidden="true" tabindex="-1"></a>xboxCodebook <span class="ot">&lt;-</span> synXbox <span class="sc">|&gt;</span></span>
<span id="cb26-116"><a href="#cb26-116" aria-hidden="true" tabindex="-1"></a>  <span class="fu">var_labels</span>(</span>
<span id="cb26-117"><a href="#cb26-117" aria-hidden="true" tabindex="-1"></a>    <span class="at">pid =</span> <span class="st">"A unique identifier assigned to each participant in the study."</span>,</span>
<span id="cb26-118"><a href="#cb26-118" aria-hidden="true" tabindex="-1"></a>    <span class="at">day =</span> <span class="st">"The day number relative to the start of the study (e.g., Day 1, Day 2)."</span>,</span>
<span id="cb26-119"><a href="#cb26-119" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> <span class="st">"The calendar date on which the gaming session occurred (format: YYYY-MM-DD)."</span>,</span>
<span id="cb26-120"><a href="#cb26-120" aria-hidden="true" tabindex="-1"></a>    <span class="at">session =</span> <span class="st">"A sequential identifier for each gaming session on a given day for the participant."</span>,</span>
<span id="cb26-121"><a href="#cb26-121" aria-hidden="true" tabindex="-1"></a>    <span class="at">titleID =</span> <span class="st">"The name of the game played during the session."</span>,</span>
<span id="cb26-122"><a href="#cb26-122" aria-hidden="true" tabindex="-1"></a>    <span class="at">sessionStart =</span> <span class="st">"The time of day when the gaming session began (format: HH:MM:SS)."</span>,</span>
<span id="cb26-123"><a href="#cb26-123" aria-hidden="true" tabindex="-1"></a>    <span class="at">duration =</span> <span class="st">"The length of the gaming session in minutes."</span>,</span>
<span id="cb26-124"><a href="#cb26-124" aria-hidden="true" tabindex="-1"></a>    <span class="at">genre =</span> <span class="st">"The genre(s) of the game played using IGDB categories."</span>,</span>
<span id="cb26-125"><a href="#cb26-125" aria-hidden="true" tabindex="-1"></a>    <span class="at">platform =</span> <span class="st">"The platform on which the game was played, for use in future merging (here: always Xbox)."</span></span>
<span id="cb26-126"><a href="#cb26-126" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb26-127"><a href="#cb26-127" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_label</span>() <span class="sc">|&gt;</span></span>
<span id="cb26-128"><a href="#cb26-128" aria-hidden="true" tabindex="-1"></a>  <span class="fu">enframe</span>(<span class="at">name =</span> <span class="st">"Variable"</span>, <span class="at">value =</span> <span class="st">"Description"</span>) <span class="sc">|&gt;</span></span>
<span id="cb26-129"><a href="#cb26-129" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Notes =</span> <span class="fu">case_when</span>(</span>
<span id="cb26-130"><a href="#cb26-130" aria-hidden="true" tabindex="-1"></a>    Variable <span class="sc">==</span> <span class="st">"genre"</span> <span class="sc">~</span> <span class="fu">paste0</span>(<span class="st">"Possible genres are: "</span>, <span class="fu">paste</span>(uniqueGenres, <span class="at">collapse =</span> <span class="st">", "</span>)),</span>
<span id="cb26-131"><a href="#cb26-131" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">""</span></span>
<span id="cb26-132"><a href="#cb26-132" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb26-133"><a href="#cb26-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-134"><a href="#cb26-134" aria-hidden="true" tabindex="-1"></a>steamCodebook <span class="ot">&lt;-</span> synSteam <span class="sc">|&gt;</span></span>
<span id="cb26-135"><a href="#cb26-135" aria-hidden="true" tabindex="-1"></a>  <span class="fu">var_labels</span>(</span>
<span id="cb26-136"><a href="#cb26-136" aria-hidden="true" tabindex="-1"></a>    <span class="at">pid =</span> <span class="st">"A unique identifier assigned to each participant in the study."</span>,</span>
<span id="cb26-137"><a href="#cb26-137" aria-hidden="true" tabindex="-1"></a>    <span class="at">day =</span> <span class="st">"The day number relative to the start of the study (e.g., Day 1, Day 2)."</span>,</span>
<span id="cb26-138"><a href="#cb26-138" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> <span class="st">"The calendar date on which the gaming session occurred (format: YYYY-MM-DD)."</span>,</span>
<span id="cb26-139"><a href="#cb26-139" aria-hidden="true" tabindex="-1"></a>    <span class="at">hour =</span> <span class="st">"The hour of the day when the gaming session began (0-23)."</span>,</span>
<span id="cb26-140"><a href="#cb26-140" aria-hidden="true" tabindex="-1"></a>    <span class="at">persona =</span> <span class="st">"One of 250 possible Steam personas, generated by LLMs, with particular gameplay habits"</span>,</span>
<span id="cb26-141"><a href="#cb26-141" aria-hidden="true" tabindex="-1"></a>    <span class="at">genre =</span> <span class="st">"The genre(s) of the game played using IGDB categories."</span>,</span>
<span id="cb26-142"><a href="#cb26-142" aria-hidden="true" tabindex="-1"></a>    <span class="at">minutes =</span> <span class="st">"The number of minutes played of that game during the hour period in question."</span>,</span>
<span id="cb26-143"><a href="#cb26-143" aria-hidden="true" tabindex="-1"></a>    <span class="at">AppID =</span> <span class="st">"A unique identifier assigned to each game on the Steam platform."</span>,</span>
<span id="cb26-144"><a href="#cb26-144" aria-hidden="true" tabindex="-1"></a>    <span class="at">Name =</span> <span class="st">"The name of the game played during the session."</span>,</span>
<span id="cb26-145"><a href="#cb26-145" aria-hidden="true" tabindex="-1"></a>    <span class="at">platform =</span> <span class="st">"The platform on which the game was played, for use in future merging (here: always Steam)."</span></span>
<span id="cb26-146"><a href="#cb26-146" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb26-147"><a href="#cb26-147" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_label</span>() <span class="sc">|&gt;</span></span>
<span id="cb26-148"><a href="#cb26-148" aria-hidden="true" tabindex="-1"></a>  <span class="fu">enframe</span>(<span class="at">name =</span> <span class="st">"Variable"</span>, <span class="at">value =</span> <span class="st">"Description"</span>) <span class="sc">|&gt;</span></span>
<span id="cb26-149"><a href="#cb26-149" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Notes =</span> <span class="fu">case_when</span>(</span>
<span id="cb26-150"><a href="#cb26-150" aria-hidden="true" tabindex="-1"></a>    Variable <span class="sc">==</span> <span class="st">"genre"</span> <span class="sc">~</span> <span class="fu">paste0</span>(<span class="st">"Possible genres are: "</span>, <span class="fu">paste</span>(uniqueGenres, <span class="at">collapse =</span> <span class="st">", "</span>)),</span>
<span id="cb26-151"><a href="#cb26-151" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">""</span></span>
<span id="cb26-152"><a href="#cb26-152" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb26-153"><a href="#cb26-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-154"><a href="#cb26-154" aria-hidden="true" tabindex="-1"></a>iOSCodebook <span class="ot">&lt;-</span> syniOS <span class="sc">|&gt;</span></span>
<span id="cb26-155"><a href="#cb26-155" aria-hidden="true" tabindex="-1"></a>  <span class="fu">var_labels</span>(</span>
<span id="cb26-156"><a href="#cb26-156" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing =</span> <span class="st">"Indicator for whether the data for the week is missing (TRUE = missing)."</span>,</span>
<span id="cb26-157"><a href="#cb26-157" aria-hidden="true" tabindex="-1"></a>    <span class="at">dropout =</span> <span class="st">"Indicator for whether the participant dropped out of the study (TRUE = dropped out)."</span>,</span>
<span id="cb26-158"><a href="#cb26-158" aria-hidden="true" tabindex="-1"></a>    <span class="at">pid =</span> <span class="st">"A unique identifier assigned to each participant in the study."</span>,</span>
<span id="cb26-159"><a href="#cb26-159" aria-hidden="true" tabindex="-1"></a>    <span class="at">week =</span> <span class="st">"The week number relative to the start of the study."</span>,</span>
<span id="cb26-160"><a href="#cb26-160" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> <span class="st">"The date corresponding to the start of the week in question (format: YYYY-MM-DD)."</span>,</span>
<span id="cb26-161"><a href="#cb26-161" aria-hidden="true" tabindex="-1"></a>    <span class="at">Entertainment =</span> <span class="st">"Total amount of time spent in entertainment apps during the week (in minutes)."</span>,</span>
<span id="cb26-162"><a href="#cb26-162" aria-hidden="true" tabindex="-1"></a>    <span class="at">Social =</span> <span class="st">"Total amount of time spent in social media apps during the week (in minutes)."</span>,</span>
<span id="cb26-163"><a href="#cb26-163" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Information &amp; Reading</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Total amount of time spent in information and reading apps during the week (in minutes)."</span>,</span>
<span id="cb26-164"><a href="#cb26-164" aria-hidden="true" tabindex="-1"></a>    <span class="at">Games =</span> <span class="st">"Total amount of time spent in gaming apps during the week (in minutes)."</span>,</span>
<span id="cb26-165"><a href="#cb26-165" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Productivity &amp; Finance</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Total amount of time spent in productivity and finance apps during the week (in minutes)."</span>,</span>
<span id="cb26-166"><a href="#cb26-166" aria-hidden="true" tabindex="-1"></a>    <span class="at">Travel =</span> <span class="st">"Total amount of time spent in travel-related apps during the week (in minutes)."</span>,</span>
<span id="cb26-167"><a href="#cb26-167" aria-hidden="true" tabindex="-1"></a>    <span class="at">Other =</span> <span class="st">"Total amount of time spent in other uncategorized apps during the week (in minutes)."</span>,</span>
<span id="cb26-168"><a href="#cb26-168" aria-hidden="true" tabindex="-1"></a>    <span class="at">Creativity =</span> <span class="st">"Total amount of time spent in creativity apps (e.g., photo/video editing) during the week (in minutes)."</span>,</span>
<span id="cb26-169"><a href="#cb26-169" aria-hidden="true" tabindex="-1"></a>    <span class="at">Education =</span> <span class="st">"Total amount of time spent in educational apps during the week (in minutes)."</span>,</span>
<span id="cb26-170"><a href="#cb26-170" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Health &amp; Fitness</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Total amount of time spent in health and fitness apps during the week (in minutes)."</span>,</span>
<span id="cb26-171"><a href="#cb26-171" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Shopping &amp; Food</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Total amount of time spent in shopping and food-related apps during the week (in minutes)."</span>,</span>
<span id="cb26-172"><a href="#cb26-172" aria-hidden="true" tabindex="-1"></a>    <span class="at">Utilities =</span> <span class="st">"Total amount of time spent in utility apps (e.g., weather, calculators) during the week (in minutes)."</span>,</span>
<span id="cb26-173"><a href="#cb26-173" aria-hidden="true" tabindex="-1"></a>    <span class="at">totalScreentime =</span> <span class="st">"Total amount of screen time across all app categories during the week (in minutes)."</span></span>
<span id="cb26-174"><a href="#cb26-174" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb26-175"><a href="#cb26-175" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_label</span>() <span class="sc">|&gt;</span></span>
<span id="cb26-176"><a href="#cb26-176" aria-hidden="true" tabindex="-1"></a>  <span class="fu">enframe</span>(<span class="at">name =</span> <span class="st">"Variable"</span>, <span class="at">value =</span> <span class="st">"Description"</span>)</span>
<span id="cb26-177"><a href="#cb26-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-178"><a href="#cb26-178" aria-hidden="true" tabindex="-1"></a>androidCodebook <span class="ot">&lt;-</span> synAndroid <span class="sc">|&gt;</span></span>
<span id="cb26-179"><a href="#cb26-179" aria-hidden="true" tabindex="-1"></a>  <span class="fu">var_labels</span>(</span>
<span id="cb26-180"><a href="#cb26-180" aria-hidden="true" tabindex="-1"></a>    <span class="at">pid =</span> <span class="st">"A unique identifier assigned to each participant in the study."</span>,</span>
<span id="cb26-181"><a href="#cb26-181" aria-hidden="true" tabindex="-1"></a>    <span class="at">day =</span> <span class="st">"The day number relative to the start of the study (e.g., Day 1, Day 2)."</span>,</span>
<span id="cb26-182"><a href="#cb26-182" aria-hidden="true" tabindex="-1"></a>    <span class="at">numDailyAppSessions =</span> <span class="st">"The total number of app sessions recorded on the given day."</span>,</span>
<span id="cb26-183"><a href="#cb26-183" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> <span class="st">"The calendar date on which the app sessions occurred (format: YYYY-MM-DD)."</span>,</span>
<span id="cb26-184"><a href="#cb26-184" aria-hidden="true" tabindex="-1"></a>    <span class="at">session =</span> <span class="st">"A sequential identifier for each app session on the given day for the participant."</span>,</span>
<span id="cb26-185"><a href="#cb26-185" aria-hidden="true" tabindex="-1"></a>    <span class="at">app =</span> <span class="st">"The name of the app used during the session."</span>,</span>
<span id="cb26-186"><a href="#cb26-186" aria-hidden="true" tabindex="-1"></a>    <span class="at">sessionStart =</span> <span class="st">"The time of day when the app session began (format: HH:MM:SS)."</span>,</span>
<span id="cb26-187"><a href="#cb26-187" aria-hidden="true" tabindex="-1"></a>    <span class="at">duration =</span> <span class="st">"The duration of the app session in minutes."</span>,</span>
<span id="cb26-188"><a href="#cb26-188" aria-hidden="true" tabindex="-1"></a>    <span class="at">category =</span> <span class="st">"The category of the app used during the session (e.g., Social, Productivity, Entertainment)."</span></span>
<span id="cb26-189"><a href="#cb26-189" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb26-190"><a href="#cb26-190" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_label</span>() <span class="sc">|&gt;</span></span>
<span id="cb26-191"><a href="#cb26-191" aria-hidden="true" tabindex="-1"></a>  <span class="fu">enframe</span>(<span class="at">name =</span> <span class="st">"Variable"</span>, <span class="at">value =</span> <span class="st">"Description"</span>)</span>
<span id="cb26-192"><a href="#cb26-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-193"><a href="#cb26-193" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate and format codebook</span></span>
<span id="cb26-194"><a href="#cb26-194" aria-hidden="true" tabindex="-1"></a><span class="fu">write.xlsx</span>(</span>
<span id="cb26-195"><a href="#cb26-195" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb26-196"><a href="#cb26-196" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Meta-info"</span> <span class="ot">=</span> metaInfo,</span>
<span id="cb26-197"><a href="#cb26-197" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Intake"</span> <span class="ot">=</span> intakeCodebook,</span>
<span id="cb26-198"><a href="#cb26-198" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Panel"</span> <span class="ot">=</span> panelCodebook,</span>
<span id="cb26-199"><a href="#cb26-199" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Diary"</span> <span class="ot">=</span> diaryCodebook,</span>
<span id="cb26-200"><a href="#cb26-200" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Nintendo"</span> <span class="ot">=</span> nintendoCodebook,</span>
<span id="cb26-201"><a href="#cb26-201" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Xbox"</span> <span class="ot">=</span> xboxCodebook,</span>
<span id="cb26-202"><a href="#cb26-202" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Steam"</span> <span class="ot">=</span> steamCodebook,</span>
<span id="cb26-203"><a href="#cb26-203" aria-hidden="true" tabindex="-1"></a>    <span class="st">"iOS"</span> <span class="ot">=</span> iOSCodebook,</span>
<span id="cb26-204"><a href="#cb26-204" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Android"</span> <span class="ot">=</span> androidCodebook</span>
<span id="cb26-205"><a href="#cb26-205" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb26-206"><a href="#cb26-206" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">"codebook.xlsx"</span>,</span>
<span id="cb26-207"><a href="#cb26-207" aria-hidden="true" tabindex="-1"></a>  <span class="at">headerStyle =</span> <span class="fu">createStyle</span>(<span class="at">textDecoration =</span> <span class="st">"bold"</span>, <span class="at">halign =</span> <span class="st">"center"</span>),</span>
<span id="cb26-208"><a href="#cb26-208" aria-hidden="true" tabindex="-1"></a>  <span class="at">overwrite =</span> <span class="cn">TRUE</span>,</span>
<span id="cb26-209"><a href="#cb26-209" aria-hidden="true" tabindex="-1"></a>  <span class="at">colWidths =</span> <span class="st">"auto"</span></span>
<span id="cb26-210"><a href="#cb26-210" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-211"><a href="#cb26-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-212"><a href="#cb26-212" aria-hidden="true" tabindex="-1"></a>codebook <span class="ot">&lt;-</span> <span class="fu">loadWorkbook</span>(<span class="st">"codebook.xlsx"</span>)</span>
<span id="cb26-213"><a href="#cb26-213" aria-hidden="true" tabindex="-1"></a><span class="fu">addStyle</span>(codebook, <span class="st">"Meta-info"</span>, <span class="at">rows =</span> <span class="fu">nrow</span>(metaInfo) <span class="sc">+</span> <span class="dv">3</span>, <span class="at">cols =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">style =</span> <span class="fu">createStyle</span>(<span class="at">wrapText =</span> <span class="cn">TRUE</span>))</span>
<span id="cb26-214"><a href="#cb26-214" aria-hidden="true" tabindex="-1"></a><span class="fu">setColWidths</span>(codebook, <span class="st">"Intake"</span>, <span class="at">cols =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">100</span>, <span class="dv">40</span>))</span>
<span id="cb26-215"><a href="#cb26-215" aria-hidden="true" tabindex="-1"></a><span class="fu">setColWidths</span>(codebook, <span class="st">"Panel"</span>, <span class="at">cols =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">100</span>, <span class="dv">40</span>))</span>
<span id="cb26-216"><a href="#cb26-216" aria-hidden="true" tabindex="-1"></a><span class="fu">setColWidths</span>(codebook, <span class="st">"Diary"</span>, <span class="at">cols =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">100</span>, <span class="dv">40</span>))</span>
<span id="cb26-217"><a href="#cb26-217" aria-hidden="true" tabindex="-1"></a><span class="fu">addStyle</span>(codebook, <span class="st">"Intake"</span>, <span class="at">rows =</span> <span class="fu">nrow</span>(intakeCodebook) <span class="sc">+</span> <span class="dv">3</span>, <span class="at">cols =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">style =</span> <span class="fu">createStyle</span>(<span class="at">wrapText =</span> <span class="cn">TRUE</span>))</span>
<span id="cb26-218"><a href="#cb26-218" aria-hidden="true" tabindex="-1"></a><span class="fu">addStyle</span>(codebook, <span class="st">"Panel"</span>, <span class="at">rows =</span> <span class="fu">nrow</span>(panelCodebook) <span class="sc">+</span> <span class="dv">3</span>, <span class="at">cols =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">style =</span> <span class="fu">createStyle</span>(<span class="at">wrapText =</span> <span class="cn">TRUE</span>))</span>
<span id="cb26-219"><a href="#cb26-219" aria-hidden="true" tabindex="-1"></a><span class="fu">addStyle</span>(codebook, <span class="st">"Diary"</span>, <span class="at">rows =</span> <span class="fu">nrow</span>(diaryCodebook) <span class="sc">+</span> <span class="dv">3</span>, <span class="at">cols =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">style =</span> <span class="fu">createStyle</span>(<span class="at">wrapText =</span> <span class="cn">TRUE</span>))</span>
<span id="cb26-220"><a href="#cb26-220" aria-hidden="true" tabindex="-1"></a><span class="fu">writeData</span>(codebook, <span class="st">"Meta-info"</span>, <span class="at">startRow =</span> <span class="fu">nrow</span>(metaInfo) <span class="sc">+</span> <span class="dv">3</span>, <span class="at">startCol =</span> <span class="dv">1</span>, <span class="at">x =</span> <span class="st">"Tabs of this file contain the respective codebooks for each data table."</span>)</span>
<span id="cb26-221"><a href="#cb26-221" aria-hidden="true" tabindex="-1"></a><span class="fu">mergeCells</span>(codebook, <span class="st">"Meta-info"</span>, <span class="at">cols =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">rows =</span> <span class="fu">nrow</span>(metaInfo) <span class="sc">+</span> <span class="dv">3</span>)</span>
<span id="cb26-222"><a href="#cb26-222" aria-hidden="true" tabindex="-1"></a><span class="fu">setRowHeights</span>(codebook, <span class="st">"Meta-info"</span>, <span class="at">rows =</span> <span class="fu">nrow</span>(metaInfo) <span class="sc">+</span> <span class="dv">3</span>, <span class="at">heights =</span> <span class="dv">50</span>)</span>
<span id="cb26-223"><a href="#cb26-223" aria-hidden="true" tabindex="-1"></a><span class="fu">saveWorkbook</span>(codebook, <span class="st">"codebook.xlsx"</span>, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<<<<<<< HEAD
<section id="save-data" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="save-data"><span class="header-section-number">2.6</span> Save data</h2>
<p>Save the data to <code>data-synthetic</code>, for use in devising analysis scripts for e.g.&nbsp;the registered reports to come.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code (save data)</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Export as CSV</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(synIntake, <span class="st">"data-synthetic/synIntake.csv.gz"</span>)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(synDiary, <span class="st">"data-synthetic/synDiary.csv.gz"</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(synPanel, <span class="st">"data-synthetic/synPanel.csv.gz"</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(synXbox, <span class="st">"data-synthetic/synXbox.csv.gz"</span>)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(synNintendo, <span class="st">"data-synthetic/synNintendo.csv.gz"</span>)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(synAndroid, <span class="st">"data-synthetic/synAndroid.csv.gz"</span>)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(synSteam, <span class="st">"data-synthetic/synSteam.csv.gz"</span>)</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(syniOS, <span class="st">"data-synthetic/syniOS.csv.gz"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
=======
<section id="save-data" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="save-data"><span class="header-section-number">3.6</span> Save data</h2>
<p>Save the data to <code>data-synthetic</code>, for use in devising analysis scripts for e.g.&nbsp;the registered reports to come.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Export as CSV</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(synIntake, <span class="st">"data-synthetic/synIntake.csv"</span>)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(synDiary, <span class="st">"data-synthetic/synDiary.csv"</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(synPanel, <span class="st">"data-synthetic/synPanel.csv"</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(synXbox, <span class="st">"data-synthetic/synXbox.csv"</span>)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(synNintendo, <span class="st">"data-synthetic/synNintendo.csv"</span>)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(synAndroid, <span class="st">"data-synthetic/synAndroid.csv"</span>)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(synSteam, <span class="st">"data-synthetic/synSteam.csv"</span>)</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(syniOS, <span class="st">"data-synthetic/syniOS.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
</details>
</div>


</section>
<<<<<<< HEAD
=======
</section>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
<<<<<<< HEAD
      <a href="./index.html" class="pagination-link  aria-label=" &lt;span="" wellbeing,="" sleep,="" and="" video="" gaming:="" analyses="" of="" comprehensive="" digital="" traces&lt;="" span&gt;"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Psychological Wellbeing, Sleep, and Video Gaming: Analyses of Comprehensive Digital Traces</span></span>
=======
      <a href="./index.html" class="pagination-link  aria-label=" &lt;span="" between="" health="" and="" logged="" video="" game="" play="" across="" platforms&lt;="" span&gt;"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Relationships Between Health and Logged Video Game Play Across Platforms</span></span>
>>>>>>> 9121dada5345018729f66e7cb486687c4378144f
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./1_preprocess.html" class="pagination-link" aria-label="<span class='chapter-number'>3</span>&nbsp; <span class='chapter-title'>Preprocess Data</span>">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Preprocess Data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>